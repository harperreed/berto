var _0x3d1b=['getInfo','bdAddrOfVerifiedButtons','forEach','newVerifiedButton','Pong','FlicScanWizard','foundPrivateButton','foundPublicButton',').\x20Now\x20connecting...','Message','Button\x20Now\x20Connecting','buttonConnected','Button\x20Connected\x20-\x20Now\x20Verifying\x20And\x20Pairing','[flic]\x20Completed\x20with\x20result:\x20','WizardSuccess','[flic]\x20Your\x20new\x20button\x20is\x20','Button\x20Pairing\x20Completed\x20-\x20Address\x20','Button\x20Pairing\x20Failed','address','[flic]\x20Unpairing\x20Button\x20','exports','../common','mqtt','publish','stringify','[flic]\x20Sending\x20','\x20To\x20','addConnectionChannel','wasQueued','notQueued','ButtonSingleClick','ButtonTripleClick','Button','ButtonDoubleClick','[flic]\x20Initialising\x20FLIC\x20Server','/usr/local/bin/flicd\x20-f\x20/var/local/flicd.db\x20-d','FlicClient','localhost','error','[flic]\x20Unable\x20To\x20Connect\x20To\x20Local\x20FLIC\x20Server','ready'];(function(_0x173d3e,_0x4120ae){var _0x5158c5=function(_0x1833b5){while(--_0x1833b5){_0x173d3e['push'](_0x173d3e['shift']());}};var _0x35508c=function(){var _0x4c2212={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x40b380,_0x257fa4,_0x402eeb,_0xf461c0){_0xf461c0=_0xf461c0||{};var _0x1f1246=_0x257fa4+'='+_0x402eeb;var _0x5220b4=0x0;for(var _0x5220b4=0x0,_0x109f88=_0x40b380['length'];_0x5220b4<_0x109f88;_0x5220b4++){var _0x313303=_0x40b380[_0x5220b4];_0x1f1246+=';\x20'+_0x313303;var _0x1ebe39=_0x40b380[_0x313303];_0x40b380['push'](_0x1ebe39);_0x109f88=_0x40b380['length'];if(_0x1ebe39!==!![]){_0x1f1246+='='+_0x1ebe39;}}_0xf461c0['cookie']=_0x1f1246;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5b7f78,_0x22e1d1){_0x5b7f78=_0x5b7f78||function(_0x5bb978){return _0x5bb978;};var _0x9b14d7=_0x5b7f78(new RegExp('(?:^|;\x20)'+_0x22e1d1['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x41c0a7=function(_0x990beb,_0x5b58c2){_0x990beb(++_0x5b58c2);};_0x41c0a7(_0x5158c5,_0x4120ae);return _0x9b14d7?decodeURIComponent(_0x9b14d7[0x1]):undefined;}};var _0x2b9365=function(){var _0x4f7178=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4f7178['test'](_0x4c2212['removeCookie']['toString']());};_0x4c2212['updateCookie']=_0x2b9365;var _0x4c6887='';var _0x144a9a=_0x4c2212['updateCookie']();if(!_0x144a9a){_0x4c2212['setCookie'](['*'],'counter',0x1);}else if(_0x144a9a){_0x4c6887=_0x4c2212['getCookie'](null,'counter');}else{_0x4c2212['removeCookie']();}};_0x35508c();}(_0x3d1b,0xb9));var _0x2b2b=function(_0x315402,_0x280a6b){_0x315402=_0x315402-0x0;var _0x3fd56d=_0x3d1b[_0x315402];return _0x3fd56d;};var _0xf58dfa=function(){var _0x1ad56a=!![];return function(_0x3c3598,_0xc483eb){var _0xc2d80f=_0x1ad56a?function(){if(_0xc483eb){var _0xa41e88=_0xc483eb['apply'](_0x3c3598,arguments);_0xc483eb=null;return _0xa41e88;}}:function(){};_0x1ad56a=![];return _0xc2d80f;};}();var _0x5a3a30=_0xf58dfa(this,function(){var _0xb58ba8=function(){return'\x64\x65\x76';},_0x3895da=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x2407c1=function(){var _0x43367e=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x43367e['\x74\x65\x73\x74'](_0xb58ba8['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x427374=function(){var _0x162a0b=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x162a0b['\x74\x65\x73\x74'](_0x3895da['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x207240=function(_0x151987){var _0x305540=~-0x1>>0x1+0xff%0x0;if(_0x151987['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x305540)){_0x376ff0(_0x151987);}};var _0x376ff0=function(_0x38e208){var _0x5bf1dc=~-0x4>>0x1+0xff%0x0;if(_0x38e208['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x5bf1dc){_0x207240(_0x38e208);}};if(!_0x2407c1()){if(!_0x427374()){_0x207240('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x207240('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x207240('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x5a3a30();const COMMON=require(_0x2b2b('0x0'));const FLIC=require('./fliclib');const execSync=COMMON['execSync'];var clickTimers={};function publish_MQTT(_0x46f743,_0x17ae75,_0x144cbb){var _0x17ae75=ENV[_0x2b2b('0x1')][_0x2b2b('0x2')]+'flic/client/'+_0x17ae75;var _0x5f49c4=JSON[_0x2b2b('0x3')](_0x144cbb);print(_0x2b2b('0x4')+_0x5f49c4+_0x2b2b('0x5')+_0x17ae75);_0x46f743[_0x2b2b('0x2')](_0x17ae75,_0x5f49c4);}function listen_button(_0x477677,_0x4bc6ab,_0x1927a2){var _0x49e366=new FLIC['FlicConnectionChannel'](_0x1927a2);_0x4bc6ab[_0x2b2b('0x6')](_0x49e366);print('[flic]\x20Listening\x20For\x20Events\x20From\x20Button\x20'+_0x1927a2);_0x49e366['on']('buttonSingleOrDoubleClickOrHold',function(_0x14c4b8,_0x1942d6,_0x1c4f45){print(_0x1927a2+'\x20'+_0x14c4b8+'\x20'+(_0x1942d6?_0x2b2b('0x7'):_0x2b2b('0x8'))+'\x20'+_0x1c4f45+'\x20seconds\x20ago');if(clickTimers[_0x1927a2]){clearTimeout(clickTimers[_0x1927a2]);clickTimers[_0x1927a2]=![];if(_0x14c4b8==_0x2b2b('0x9')){_0x14c4b8=_0x2b2b('0xa');}publish_MQTT(_0x477677,_0x2b2b('0xb'),{'address':_0x1927a2,'click':_0x14c4b8});}else{if(_0x14c4b8==_0x2b2b('0xc')){clickTimers[_0x1927a2]=setTimeout(function(){clickTimers[_0x1927a2]=![];publish_MQTT(_0x477677,_0x2b2b('0xb'),{'address':_0x1927a2,'click':_0x2b2b('0xc')});},0x2bc);}else{publish_MQTT(_0x477677,_0x2b2b('0xb'),{'address':_0x1927a2,'click':_0x14c4b8});}}});_0x49e366['on']('connectionStatusChanged',function(_0xe6d778,_0x15f4f3){print(_0x1927a2+'\x20'+_0xe6d778+(_0xe6d778=='Disconnected'?'\x20'+_0x15f4f3:''));publish_MQTT(_0x477677,_0x2b2b('0xb'),{'address':_0x1927a2,'state':_0xe6d778});});}function init(_0x33f59b){print(_0x2b2b('0xd'));execSync(_0x2b2b('0xe'));var _0x57b23b=new FLIC[(_0x2b2b('0xf'))](_0x2b2b('0x10'),0x15af);_0x57b23b['on'](_0x2b2b('0x11'),function(_0x492a7f){error(_0x2b2b('0x12'));});_0x57b23b['on'](_0x2b2b('0x13'),function(){_0x57b23b[_0x2b2b('0x14')](function(_0x238134){_0x238134[_0x2b2b('0x15')][_0x2b2b('0x16')](function(_0x6c2ad5){listen_button(_0x33f59b,_0x57b23b,_0x6c2ad5);});_0x57b23b['on'](_0x2b2b('0x17'),function(_0x5360ae){listen_button(_0x33f59b,_0x57b23b,_0x5360ae);});});});return _0x57b23b;}function server_ping(_0x4b4cef,_0xb97537,_0x13af61){_0xb97537[_0x2b2b('0x14')](function(_0x57dc25){publish_MQTT(_0x4b4cef,_0x2b2b('0x18'),{'Buttons':_0x57dc25[_0x2b2b('0x15')]});});}function server_pair(_0x52b7cc,_0x372dbb,_0x5e2847){print('[flic]\x20Pairing\x20Process\x20Started');var _0x14560f=FLIC[_0x2b2b('0x19')];var _0x23dbde=new _0x14560f();_0x23dbde['on'](_0x2b2b('0x1a'),function(){print('[flic]\x20Your\x20button\x20is\x20private.\x20Hold\x20down\x20for\x2010\x20seconds\x20to\x20make\x20it\x20public.');publish_MQTT(_0x52b7cc,'Message',{'message':'Button\x20Being\x20Paired\x20-\x20Please\x20Hold\x20Button\x20Down\x20For\x2010\x20Seconds'});});_0x23dbde['on'](_0x2b2b('0x1b'),function(_0x52fd7c,_0x5274af){print('[flic]\x20Found\x20public\x20button\x20'+_0x52fd7c+'\x20('+_0x5274af+_0x2b2b('0x1c'));publish_MQTT(_0x52b7cc,_0x2b2b('0x1d'),{'message':_0x2b2b('0x1e')});});_0x23dbde['on'](_0x2b2b('0x1f'),function(_0x2c31a5,_0x3f56bf){print('[flic]\x20Button\x20connected.\x20Now\x20verifying\x20and\x20pairing...');publish_MQTT(_0x52b7cc,'Message',{'message':_0x2b2b('0x20')});});_0x23dbde['on']('completed',function(_0x49fdd3,_0x522815,_0x576b89){print(_0x2b2b('0x21')+_0x49fdd3);if(_0x49fdd3==_0x2b2b('0x22')){print(_0x2b2b('0x23')+_0x522815);publish_MQTT(_0x52b7cc,_0x2b2b('0x1d'),{'message':_0x2b2b('0x24')+_0x522815});server_ping(_0x52b7cc,_0x372dbb);}else{publish_MQTT(_0x52b7cc,'Message',{'message':_0x2b2b('0x25')});}});_0x372dbb['addScanWizard'](_0x23dbde);}function server_unpair(_0x493b5b,_0x23cebb,_0x10e1f6){if(_0x10e1f6[_0x2b2b('0x26')]){print(_0x2b2b('0x27')+_0x10e1f6[_0x2b2b('0x26')]);_0x23cebb['deleteButton'](_0x10e1f6[_0x2b2b('0x26')]);server_ping(_0x493b5b,_0x23cebb);}}function server_reset(_0x31c1af,_0xd5f11a,_0x39e582){_0xd5f11a[_0x2b2b('0x14')](function(_0x14c6e7){_0x14c6e7['bdAddrOfVerifiedButtons']['forEach'](function(_0x55990e){_0xd5f11a['deleteButton'](_0x55990e);});server_ping(_0x31c1af,_0xd5f11a);});}module[_0x2b2b('0x28')]={'init':init,'commands':{'server_Ping':server_ping,'server_Pair':server_pair,'server_Unpair':server_unpair,'server_Reset':server_reset}};