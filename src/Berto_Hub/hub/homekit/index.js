var _0x351d=['hap-nodejs','mqtt','stringify','\x20To\x20','servers','homekit','Bridge','Berto\x20Hub','uuid','generate','getService','Service','AccessoryInformation','setCharacteristic','Manufacturer','Berto','Characteristic','Model','1.0','identify','publish','Accessory','Categories','BRIDGE','[homekit]\x20Configuring\x20Bridge','removeAllBridgedAccessories','name','Control4','proxy','SerialNumber','./accessories/','type','.js','\x20Accessory','addBridgedAccessory','[homekit]\x20Update\x20Device\x20','\x20State','event','[homekit]\x20','characteristic','state','Device\x20','\x20Does\x20Not\x20Exist\x20As\x20An\x20Accessory','exports'];(function(_0x77e9f8,_0x4728a5){var _0x15200b=function(_0x15e0c1){while(--_0x15e0c1){_0x77e9f8['push'](_0x77e9f8['shift']());}};var _0xa83fc0=function(){var _0x591387={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x33fbdf,_0x5479e6,_0x5c7266,_0x4b8169){_0x4b8169=_0x4b8169||{};var _0x4c026f=_0x5479e6+'='+_0x5c7266;var _0x183689=0x0;for(var _0x183689=0x0,_0x53ab4b=_0x33fbdf['length'];_0x183689<_0x53ab4b;_0x183689++){var _0x179802=_0x33fbdf[_0x183689];_0x4c026f+=';\x20'+_0x179802;var _0x1c5671=_0x33fbdf[_0x179802];_0x33fbdf['push'](_0x1c5671);_0x53ab4b=_0x33fbdf['length'];if(_0x1c5671!==!![]){_0x4c026f+='='+_0x1c5671;}}_0x4b8169['cookie']=_0x4c026f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3dc8af,_0xf7d477){_0x3dc8af=_0x3dc8af||function(_0x51ba63){return _0x51ba63;};var _0x8807ee=_0x3dc8af(new RegExp('(?:^|;\x20)'+_0xf7d477['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x3c4465=function(_0x3fcdaf,_0x160dbf){_0x3fcdaf(++_0x160dbf);};_0x3c4465(_0x15200b,_0x4728a5);return _0x8807ee?decodeURIComponent(_0x8807ee[0x1]):undefined;}};var _0x15827f=function(){var _0x197a22=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x197a22['test'](_0x591387['removeCookie']['toString']());};_0x591387['updateCookie']=_0x15827f;var _0x3c1e57='';var _0x4336db=_0x591387['updateCookie']();if(!_0x4336db){_0x591387['setCookie'](['*'],'counter',0x1);}else if(_0x4336db){_0x3c1e57=_0x591387['getCookie'](null,'counter');}else{_0x591387['removeCookie']();}};_0xa83fc0();}(_0x351d,0x108));var _0xe28a=function(_0x240dda,_0x1f458d){_0x240dda=_0x240dda-0x0;var _0x258317=_0x351d[_0x240dda];return _0x258317;};var _0x5cb124=function(){var _0x21155f=!![];return function(_0x187db5,_0x2cf830){var _0x55ca71=_0x21155f?function(){if(_0x2cf830){var _0x40e833=_0x2cf830['apply'](_0x187db5,arguments);_0x2cf830=null;return _0x40e833;}}:function(){};_0x21155f=![];return _0x55ca71;};}();var _0x35c843=_0x5cb124(this,function(){var _0xb479be=function(){return'\x64\x65\x76';},_0x4bb6ab=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x1ce7ab=function(){var _0x28d2fd=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x28d2fd['\x74\x65\x73\x74'](_0xb479be['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5c3961=function(){var _0x363646=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x363646['\x74\x65\x73\x74'](_0x4bb6ab['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x3b7cce=function(_0x13baec){var _0x5e5845=~-0x1>>0x1+0xff%0x0;if(_0x13baec['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x5e5845)){_0x3c5167(_0x13baec);}};var _0x3c5167=function(_0x31fd7a){var _0x4462fe=~-0x4>>0x1+0xff%0x0;if(_0x31fd7a['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x4462fe){_0x3b7cce(_0x31fd7a);}};if(!_0x1ce7ab()){if(!_0x5c3961()){_0x3b7cce('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x3b7cce('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x3b7cce('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x35c843();var HAP=require(_0xe28a('0x0'));var ACCESSORIES;function publish_MQTT(_0x222109,_0x7bc305,_0x2adf74){var _0x7bc305=ENV[_0xe28a('0x1')]['publish']+'/homekit/client/'+_0x7bc305;var _0x59385a=JSON[_0xe28a('0x2')](_0x2adf74);print('[homekit]\x20Sending\x20'+_0x59385a+_0xe28a('0x3')+_0x7bc305);_0x222109['publish'](_0x7bc305,_0x59385a);}function init(_0x5ac4c7){print('[homekit]\x20Initialising\x20Homekit\x20Server');HAP['init'](ENV[_0xe28a('0x4')][_0xe28a('0x5')]['storage']);var _0x197c65=new HAP[(_0xe28a('0x6'))](_0xe28a('0x7'),HAP[_0xe28a('0x8')][_0xe28a('0x9')](ENV[_0xe28a('0x8')]));_0x197c65[_0xe28a('0xa')](HAP[_0xe28a('0xb')][_0xe28a('0xc')])[_0xe28a('0xd')](HAP['Characteristic'][_0xe28a('0xe')],_0xe28a('0xf'))[_0xe28a('0xd')](HAP[_0xe28a('0x10')][_0xe28a('0x11')],_0xe28a('0x12'))[_0xe28a('0xd')](HAP[_0xe28a('0x10')]['SerialNumber'],ENV['uuid']);_0x197c65['on'](_0xe28a('0x13'),function(_0x35598a,_0x327610){print('[homekit]\x20Identify\x20Bridge\x20'+ENV['uuid']);_0x327610();});_0x197c65[_0xe28a('0x14')]({'username':ENV[_0xe28a('0x8')],'port':0xca72,'pincode':'031-45-154','category':HAP[_0xe28a('0x15')][_0xe28a('0x16')][_0xe28a('0x17')]});publish_MQTT(_0x5ac4c7,0x0,{'event':'config'});return _0x197c65;}function server_config(_0x42cb94,_0x5f3727,_0x1174b6){print(_0xe28a('0x18'));_0x5f3727[_0xe28a('0x19')]();ACCESSORIES={};for(var _0x42d8a4 in _0x1174b6){var _0x48bd5e=_0x1174b6[_0x42d8a4];var _0x296c5d=new HAP['Accessory'](_0x48bd5e[_0xe28a('0x1a')],HAP[_0xe28a('0x8')]['generate'](_0x42d8a4));_0x296c5d[_0xe28a('0xa')](HAP['Service']['AccessoryInformation'])[_0xe28a('0xd')](HAP['Characteristic'][_0xe28a('0xe')],_0xe28a('0x1b'))[_0xe28a('0xd')](HAP[_0xe28a('0x10')]['Model'],_0x48bd5e[_0xe28a('0x1c')])['setCharacteristic'](HAP['Characteristic'][_0xe28a('0x1d')],_0x42d8a4);_0x296c5d['on'](_0xe28a('0x13'),function(_0x47fd11,_0x27765a){publish_MQTT(_0x42cb94,_0x42d8a4,{'event':_0xe28a('0x13')});_0x27765a();});var _0x296c5d=require(_0xe28a('0x1e')+_0x48bd5e[_0xe28a('0x1f')]+_0xe28a('0x20'))(_0x296c5d,_0x42cb94,_0x42d8a4,_0x48bd5e);print('[homekit]\x20Adding\x20Device\x20'+_0x42d8a4+_0xe28a('0x21'));_0x5f3727[_0xe28a('0x22')](_0x296c5d);ACCESSORIES[_0x42d8a4]=_0x296c5d[_0xe28a('0xa')](_0x42d8a4);}}function server_update(_0x33c88b,_0x24539a,_0x26d55a){var _0x4c3bb0=_0x26d55a['id'];var _0x56a62b=ACCESSORIES[_0x4c3bb0];if(_0x56a62b){print(_0xe28a('0x23')+_0x4c3bb0+_0xe28a('0x24'));if(_0x26d55a[_0xe28a('0x25')]){for(var _0x4900e1 in _0x26d55a[_0xe28a('0x25')]){var _0x44387f=_0x26d55a['event'][_0x4900e1];print(_0xe28a('0x26')+JSON[_0xe28a('0x2')](_0x44387f));_0x56a62b['updateCharacteristic'](HAP[_0xe28a('0x10')][_0x44387f[_0xe28a('0x27')]],_0x44387f[_0xe28a('0x28')]);}}}else{error(_0xe28a('0x29')+_0x4c3bb0+_0xe28a('0x2a'));}}module[_0xe28a('0x2b')]={'init':init,'commands':{'server_Config':server_config,'server_Update':server_update}};