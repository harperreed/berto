var _0x560b=['daemon','pid','execSync','argv','slice','/var/run/berto.pid','kill','psreal\x20-C\x20node\x20-o\x20pid,cmd\x20|\x20grep\x20-w\x20server.js\x20|\x20awk\x20\x27{print\x20$1}\x27\x20|\x20xargs\x20kill\x202>/dev/null','method','POST','data','toString','end','parse','payload','Service:\x20','then','message','statusCode','statusMessage','Invalid\x20Service','Invalid\x20JSON','error','exit','SIGTERM','remove','Accepting\x20Requests\x20On\x20Port\x20','host','port','lastServerResponse','login','username','password','quit','User\x20Not\x20Authenticated','from','split','Unable\x20To\x20Send\x20Mail','Mail\x20Sent\x20Successfully','response','help','User\x20Authenticated','Unable\x20To\x20Establish\x20Connection','connect','protocol','listen','redirect','localhost','readFileSync','/etc/ssl/server.pem','utf8','Proxy\x20Error','Proxy\x20Started\x20On\x20Port\x20','close','Proxy\x20Shutdown\x20On\x20Port\x20','Proxy\x20Already\x20Exists\x20On\x20Port\x20','restart','http','./common','./http-proxy','Server','minimist'];(function(_0x1cb26a,_0x1394f7){var _0x227ee7=function(_0x2b83bb){while(--_0x2b83bb){_0x1cb26a['push'](_0x1cb26a['shift']());}};var _0x1eaedf=function(){var _0x1cf428={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2d55d4,_0xff5498,_0xeeb1f4,_0x4ecf25){_0x4ecf25=_0x4ecf25||{};var _0x1c6ab5=_0xff5498+'='+_0xeeb1f4;var _0x35cafd=0x0;for(var _0x35cafd=0x0,_0x25d8bf=_0x2d55d4['length'];_0x35cafd<_0x25d8bf;_0x35cafd++){var _0x26235d=_0x2d55d4[_0x35cafd];_0x1c6ab5+=';\x20'+_0x26235d;var _0x5766f0=_0x2d55d4[_0x26235d];_0x2d55d4['push'](_0x5766f0);_0x25d8bf=_0x2d55d4['length'];if(_0x5766f0!==!![]){_0x1c6ab5+='='+_0x5766f0;}}_0x4ecf25['cookie']=_0x1c6ab5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2ca5b5,_0x315087){_0x2ca5b5=_0x2ca5b5||function(_0x9b64ff){return _0x9b64ff;};var _0x48a575=_0x2ca5b5(new RegExp('(?:^|;\x20)'+_0x315087['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x28a8d4=function(_0x102135,_0x467d4f){_0x102135(++_0x467d4f);};_0x28a8d4(_0x227ee7,_0x1394f7);return _0x48a575?decodeURIComponent(_0x48a575[0x1]):undefined;}};var _0x1901c0=function(){var _0x50d37d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x50d37d['test'](_0x1cf428['removeCookie']['toString']());};_0x1cf428['updateCookie']=_0x1901c0;var _0x449d64='';var _0x4a3d53=_0x1cf428['updateCookie']();if(!_0x4a3d53){_0x1cf428['setCookie'](['*'],'counter',0x1);}else if(_0x4a3d53){_0x449d64=_0x1cf428['getCookie'](null,'counter');}else{_0x1cf428['removeCookie']();}};_0x1eaedf();}(_0x560b,0xf3));var _0x1dde=function(_0x3c4747,_0x3b4290){_0x3c4747=_0x3c4747-0x0;var _0x7bdd37=_0x560b[_0x3c4747];return _0x7bdd37;};var _0x1b4ad1=function(){var _0x29eed8=!![];return function(_0x4bb4aa,_0x47e29c){var _0x2d3fd2=_0x29eed8?function(){if(_0x47e29c){var _0x177faf=_0x47e29c['apply'](_0x4bb4aa,arguments);_0x47e29c=null;return _0x177faf;}}:function(){};_0x29eed8=![];return _0x2d3fd2;};}();var _0x179147=_0x1b4ad1(this,function(){var _0xec9c0f=function(){return'\x64\x65\x76';},_0x82f4c8=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x216e73=function(){var _0x448af4=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x448af4['\x74\x65\x73\x74'](_0xec9c0f['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x6f7f34=function(){var _0x5d8bd3=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x5d8bd3['\x74\x65\x73\x74'](_0x82f4c8['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x1df2b5=function(_0x282fcc){var _0xa2b3ff=~-0x1>>0x1+0xff%0x0;if(_0x282fcc['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0xa2b3ff)){_0x10f5c6(_0x282fcc);}};var _0x10f5c6=function(_0x131d38){var _0x1021db=~-0x4>>0x1+0xff%0x0;if(_0x131d38['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1021db){_0x1df2b5(_0x131d38);}};if(!_0x216e73()){if(!_0x6f7f34()){_0x1df2b5('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x1df2b5('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x1df2b5('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x179147();const HTTP=require(_0x1dde('0x0'));const COMMON=require(_0x1dde('0x1'));const SMTP=require('./smtp');const PROXY=require(_0x1dde('0x2'))[_0x1dde('0x3')];const minimist=COMMON[_0x1dde('0x4')];const print=COMMON['print'];const error=COMMON['error'];const deamon=COMMON[_0x1dde('0x5')];const npid=COMMON[_0x1dde('0x6')];const execSync=COMMON[_0x1dde('0x7')];const fs=COMMON['fs'];const args=minimist(process[_0x1dde('0x8')][_0x1dde('0x9')](0x2));var PORT=0x46a0;var PIDFILE=_0x1dde('0xa');if(args['p']){PORT=args['p'];}if(args[_0x1dde('0x6')]){PIDFILE=args[_0x1dde('0x6')];}if(args[_0x1dde('0xb')]){execSync(_0x1dde('0xc'));process['exit'](0x0);}var DEBUG=args['d'];var FOREGROUND=args['f'];if(FOREGROUND){DEBUG=!![];}else{daemon();}var proxies={};const server=HTTP['createServer'](function(_0x39bbd2,_0x159b8e){if(_0x39bbd2[_0x1dde('0xd')]===_0x1dde('0xe')){let _0x477db7='';_0x39bbd2['on'](_0x1dde('0xf'),function(_0x7920ec){_0x477db7+=_0x7920ec[_0x1dde('0x10')]();});_0x39bbd2['on'](_0x1dde('0x11'),function(){try{var _0x2054d6=JSON[_0x1dde('0x12')](_0x477db7);var _0x187fb3=_0x2054d6['service'];var _0x3867b6=_0x2054d6[_0x1dde('0x13')];if(SERVICES[_0x187fb3]){print(_0x1dde('0x14')+_0x187fb3);var _0x491184=SERVICES[_0x187fb3](_0x3867b6);_0x491184[_0x1dde('0x15')](function(_0x5bf133){print(_0x5bf133[_0x1dde('0x16')]);_0x159b8e[_0x1dde('0x17')]=_0x5bf133[_0x1dde('0x17')];_0x159b8e[_0x1dde('0x18')]=_0x5bf133[_0x1dde('0x18')];_0x159b8e[_0x1dde('0x11')](_0x5bf133[_0x1dde('0x16')]);},function(_0x730b78){error(_0x730b78);});}else{error(_0x1dde('0x19'));_0x159b8e[_0x1dde('0x17')]=0x190;_0x159b8e[_0x1dde('0x18')]=_0x1dde('0x19');_0x159b8e['end'](_0x1dde('0x19'));}}catch(_0xba1610){error(_0xba1610);_0x159b8e[_0x1dde('0x17')]=0x190;_0x159b8e['statusMessage']=_0x1dde('0x1a');_0x159b8e[_0x1dde('0x11')](_0xba1610[_0x1dde('0x10')]());}});}else{_0x159b8e[_0x1dde('0x11')]();}});server['on'](_0x1dde('0x1b'),function(_0x39ac57){error(_0x39ac57[_0x1dde('0x10')]());process['exit'](0x1);});server['listen'](PORT,function(_0x4ec56e){if(_0x4ec56e){error(_0x4ec56e['toString']());process[_0x1dde('0x1c')](0x1);}var _0x9540d=npid['create'](PIDFILE,!![]);process['on'](_0x1dde('0x1d'),function(){_0x9540d[_0x1dde('0x1e')]();process[_0x1dde('0x1c')](0x0);});print(_0x1dde('0x1f')+PORT);});const SERVICES={'sendmail':function(_0x290755){return new Promise(function(_0x2cfde4,_0x5e221b){var _0x13f93b=new SMTP({'host':_0x290755[_0x1dde('0x20')],'port':_0x290755[_0x1dde('0x21')],'debug':DEBUG,'logger':DEBUG});_0x13f93b['on']('connect',function(_0x81f8eb,_0x335f48){var _0x36b40e=_0x13f93b[_0x1dde('0x22')];_0x13f93b[_0x1dde('0x23')]({'user':_0x290755[_0x1dde('0x24')],'pass':_0x290755[_0x1dde('0x25')]},function(_0x81f8eb){_0x36b40e+='\x0d\x0a'+_0x13f93b['lastServerResponse'];if(_0x81f8eb){_0x13f93b[_0x1dde('0x26')]();_0x2cfde4({'statusCode':0x190,'statusMessage':_0x1dde('0x27'),'message':_0x81f8eb['toString']()});}else{if(_0x290755[_0x1dde('0x28')]){_0x13f93b['send']({'from':_0x290755['from'],'to':_0x290755['to'][_0x1dde('0x29')](',')},_0x290755[_0x1dde('0x16')],function(_0x81f8eb,_0x335f48){_0x36b40e+='\x0d\x0a'+_0x13f93b[_0x1dde('0x22')];if(_0x81f8eb){_0x13f93b['quit']();_0x2cfde4({'statusCode':0x190,'statusMessage':_0x1dde('0x2a'),'message':_0x36b40e+'\x0d\x0a'+_0x81f8eb[_0x1dde('0x10')]()});}else{_0x13f93b[_0x1dde('0x26')]();_0x2cfde4({'statusCode':0xc8,'statusMessage':_0x1dde('0x2b'),'message':_0x36b40e+'\x0d\x0a'+_0x335f48[_0x1dde('0x2c')][_0x1dde('0x10')]()});}});}else{_0x13f93b[_0x1dde('0x2d')](function(){_0x13f93b[_0x1dde('0x26')]();_0x2cfde4({'statusCode':0xc8,'statusMessage':_0x1dde('0x2e'),'message':_0x36b40e+'\x0d\x0a'+_0x13f93b[_0x1dde('0x22')]});});}}});});_0x13f93b['on'](_0x1dde('0x1b'),function(_0x2d83f8){_0x2cfde4({'statusCod':0x190,'statusMessage':_0x1dde('0x2f'),'message':_0x2d83f8['toString']()});});_0x13f93b['on']('end',function(){});_0x13f93b[_0x1dde('0x30')]();});},'proxy':function(_0xf657c7){return new Promise(function(_0x300db3,_0x44a993){var _0x226827=_0xf657c7[_0x1dde('0x31')];var _0x2a86f0=_0xf657c7[_0x1dde('0x32')];var _0x7a3ee0=_0xf657c7[_0x1dde('0x33')];var _0x322e1b=_0xf657c7['action'];function _0x1961ba(){proxies[_0x2a86f0]=new PROXY({'target':{'host':_0x1dde('0x34'),'port':_0x7a3ee0},'ssl':{'key':fs[_0x1dde('0x35')](_0x1dde('0x36'),'utf8'),'cert':fs[_0x1dde('0x35')](_0x1dde('0x36'),_0x1dde('0x37'))}});proxies[_0x2a86f0]['on'](_0x1dde('0x1b'),function(_0x358ea,_0xb74a6f,_0x395e89){error(_0x358ea);_0x395e89[_0x1dde('0x17')]=0x190;_0x395e89[_0x1dde('0x18')]=_0x1dde('0x38');_0x395e89[_0x1dde('0x11')]();});proxies[_0x2a86f0][_0x1dde('0x32')](_0x2a86f0,function(){return _0x300db3({'statusCode':0xc8,'statusMessage':_0x1dde('0x39')+_0x2a86f0,'message':_0x1dde('0x39')+_0x2a86f0});});}function _0x2e154a(){proxies[_0x2a86f0][_0x1dde('0x3a')](function(){delete proxies[_0x2a86f0];return _0x300db3({'statusCode':0xc8,'statusMessage':_0x1dde('0x3b')+_0x2a86f0,'message':'Proxy\x20Shutdown\x20On\x20Port\x20'+_0x2a86f0});});}if(_0x322e1b=='start'){if(!proxies[_0x2a86f0]){return _0x1961ba();}else{_0x300db3({'statusCode':0xc8,'statusMessage':_0x1dde('0x3c')+_0x2a86f0,'message':_0x1dde('0x3c')+_0x2a86f0});return;}}if(_0x322e1b=='stop'){if(proxies[_0x2a86f0]){return _0x2e154a();}else{_0x300db3({'statusCode':0xc8,'statusMessage':'Proxy\x20Does\x20Not\x20Exist\x20On\x20Port\x20'+_0x2a86f0,'message':'Proxy\x20Does\x20Not\x20Exist\x20On\x20Port\x20'+_0x2a86f0});return;}}if(_0x322e1b==_0x1dde('0x3d')){if(_0x2e154a&&proxies[_0x2a86f0]&&proxies[_0x2a86f0][_0x1dde('0x3a')]){if(_0x1961ba){proxies[_0x2a86f0][_0x1dde('0x3a')](function(){delete proxies[_0x2a86f0];return _0x1961ba();});}else{return _0x2e154a();}}else{if(_0x1961ba){return _0x1961ba();}}}});}};