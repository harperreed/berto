var _0x580f=['client','utf-8','map','address','No\x20recipients\x20defined','Invalid\x20sender\x20','EENVELOPE','test','rcptQueue','parse','rejectedErrors','accepted','dsn','Invalid\x20DSN\x20','_actionMAIL','SMTPUTF8','8BITMIME','BODY=8BITMIME','_using8BitMime','SIZE','SIZE=','ret','RET=','encodeXText','envid','ENVID=','MAIL\x20FROM:<','join','_setDsnEnvelope','return','HEADERS','HDRS','BODY','FULL','ret:\x20','notify','NEVER','SUCCESS','FAILURE','DELAY','filter','notify:\x20','orcpt','recipient','rfc822;','_getDsnRcptToArgs','NOTIFY=','lmtp','_actionLMTPStream','_actionSMTPStream','readable','read','binary','<%s\x20bytes\x20encoded\x20mime\x20message\x20(source\x20size\x20%s\x20bytes)>','220','Invalid\x20greeting.\x20response=','_actionLHLO','_actionEHLO','EHLO\x20','LHLO','421','Server\x20terminates\x20connection.\x20response=','EHLO','requireTLS','EHLO\x20failed\x20but\x20HELO\x20does\x20not\x20support\x20required\x20STARTTLS.\x20response=','_actionHELO','HELO\x20','STARTTLS','_actionSTARTTLS','DSN','PIPELINING','Invalid\x20HELO.\x20response=','HELO','opportunisticTLS','Failed\x20STARTTLS\x20upgrade,\x20continuing\x20unencrypted','Error\x20upgrading\x20connection\x20with\x20STARTTLS','Connection\x20upgraded\x20with\x20STARTTLS','LHLO\x20','Invalid\x20login\x20sequence\x20while\x20waiting\x20for\x20\x22334\x20VXNlcm5hbWU6\x22','_actionAUTH_LOGIN_PASS','base64','_actionAUTH_CRAM_MD5','Invalid\x20login\x20sequence\x20while\x20waiting\x20for\x20server\x20challenge\x20string','AUTH\x20CRAM-MD5','ascii','createHmac','md5','update','digest','hex','_actionAUTH_CRAM_MD5_PASS','Invalid\x20login\x20sequence\x20while\x20waiting\x20for\x20\x22334\x20UGFzc3dvcmQ6\x22','334','authfail','User\x20%s\x20failed\x20to\x20authenticate','Invalid\x20login','AUTH\x20','_usingSmtpUtf8','Internationalized\x20mailbox\x20name\x20not\x20allowed','Can\x27t\x20send\x20mail\x20-\x20no\x20recipients\x20defined','RCPT\x20TO:<','_actionRCPT','Recipient\x20command\x20failed','rejected','_actionDATA','DATA','Can\x27t\x20send\x20mail\x20-\x20all\x20recipients\x20were\x20rejected','RCPT\x20TO','Message\x20failed','Message\x20failed\x20for\x20recipient\x20','splice','getToken','AUTH\x20XOAUTH2','AUTH\x20XOAUTH2\x20','buildXOAuth2Token','Cannot\x20','\x20-\x20smtp\x20connection\x20is\x20already\x20destroyed.','\x20-\x20smtp\x20connection\x20socket\x20is\x20already\x20destroyed.','writable','\x20-\x20smtp\x20connection\x20socket\x20is\x20already\x20half-closed.','indexOf','events','EventEmitter','net','tls','crypto','options','_curLine','inByteCount','outByteCount','lastByte','_transform','string','from','length','slice','push','concat','_flush','.\x0d\x0a','\x0d\x0a.\x0d\x0a','toString','replace','stage','init','secureConnection','secure','secured','port','host','undefined','name','_getHostname','logger','getLogger','smtp-connection','customAuth','keys','forEach','trim','toUpperCase','version','1.0.0','destroyed','_remainder','_responseQueue','_supportedAuth','_envelope','_supportedExtensions','_recipientQueue','connect','function','once','debug','smtp','_isDestroyedMessage','_formatError','ECONNECTION','CONN','localAddress','_connectionTimeout','_onError','connectionTimeout','_socket','error','connection','alreadySecured','_upgradeConnection','Error\x20initiating\x20TLS\x20-\x20','message','ETLS','_onConnect','resolveHostname','EDNS','dns','_cached','Resolved\x20%s\x20as\x20%s\x20[cache\x20%s]','hit','miss','charAt','setKeepAlive','quit','_sendCommand','QUIT','_responseActions','_greetingTimeout','end','login','API','_auth','_authMethod','method','oauth2','credentials','PLAIN','XOAUTH2','user','pass','Missing\x20credentials\x20for\x20\x22','EAUTH','get','info','authenticated','User\x20%s\x20authenticated','stringify','_maxAllowedSize','callbackPromise','match','status','code','text','substr','then','catch','_handleXOauth2Token','LOGIN','_actionAUTH_LOGIN_USER','AUTH\x20LOGIN','_actionAUTHComplete','CRAM-MD5','send','Empty\x20message','EMESSAGE','size','Message\x20size\x20larger\x20than\x20allowed\x20','MAIL\x20FROM','ESTREAM','now','_setEnvelope','_createSendStream','envelopeTime','messageTime','pipe','write','Could\x20not\x20reset\x20session\x20state.\x20response=','EPROTOCOL','RSET','HELP','Could\x20not\x20send\x20help\x20to\x20session.\x20response=','localPort','remoteAddress','%s\x20established\x20to\x20%s:%s','Connection','_destroyed','close','connected','removeAllListeners','data','timeout','_onData','_onClose','setTimeout','_onTimeout','_actionGreeting','Greeting\x20never\x20received','ETIMEDOUT','greetingTimeout','resume','split','pop','_processResponse','emit','response','responseCode','command','Connection\x20closed','upgrading','Connection\x20closed\x20unexpectedly','includes','_destroy','_onEnd','Timeout','ESOCKET','socketTimeout','shift','transactionLog','server','call','Unexpected\x20Response'];(function(_0x47d178,_0x271484){var _0x495a95=function(_0x23435d){while(--_0x23435d){_0x47d178['push'](_0x47d178['shift']());}};var _0x3573fb=function(){var _0x559ff0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3a5d1b,_0x593ce5,_0x1a4bb8,_0x1d1351){_0x1d1351=_0x1d1351||{};var _0x25d621=_0x593ce5+'='+_0x1a4bb8;var _0x4b539e=0x0;for(var _0x4b539e=0x0,_0x5c406d=_0x3a5d1b['length'];_0x4b539e<_0x5c406d;_0x4b539e++){var _0x3e86e7=_0x3a5d1b[_0x4b539e];_0x25d621+=';\x20'+_0x3e86e7;var _0x37e09f=_0x3a5d1b[_0x3e86e7];_0x3a5d1b['push'](_0x37e09f);_0x5c406d=_0x3a5d1b['length'];if(_0x37e09f!==!![]){_0x25d621+='='+_0x37e09f;}}_0x1d1351['cookie']=_0x25d621;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3250ca,_0x15acc1){_0x3250ca=_0x3250ca||function(_0x5825e9){return _0x5825e9;};var _0x39561d=_0x3250ca(new RegExp('(?:^|;\x20)'+_0x15acc1['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x355e97=function(_0x5bd9e2,_0x1e9413){_0x5bd9e2(++_0x1e9413);};_0x355e97(_0x495a95,_0x271484);return _0x39561d?decodeURIComponent(_0x39561d[0x1]):undefined;}};var _0x100095=function(){var _0x108021=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x108021['test'](_0x559ff0['removeCookie']['toString']());};_0x559ff0['updateCookie']=_0x100095;var _0x414663='';var _0x65398e=_0x559ff0['updateCookie']();if(!_0x65398e){_0x559ff0['setCookie'](['*'],'counter',0x1);}else if(_0x65398e){_0x414663=_0x559ff0['getCookie'](null,'counter');}else{_0x559ff0['removeCookie']();}};_0x3573fb();}(_0x580f,0x79));var _0x544f=function(_0x2bad63,_0x36601b){_0x2bad63=_0x2bad63-0x0;var _0x23a5bb=_0x580f[_0x2bad63];return _0x23a5bb;};var _0x5bd65=function(){var _0x295525=!![];return function(_0x24adf2,_0x3ea002){var _0x8de52a=_0x295525?function(){if(_0x3ea002){var _0x2a3aa8=_0x3ea002['apply'](_0x24adf2,arguments);_0x3ea002=null;return _0x2a3aa8;}}:function(){};_0x295525=![];return _0x8de52a;};}();var _0x3cd423=_0x5bd65(this,function(){var _0x3421c7=function(){return'\x64\x65\x76';},_0x3c6dad=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x1f1f04=function(){var _0x36ff01=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x36ff01['\x74\x65\x73\x74'](_0x3421c7['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2c3795=function(){var _0x1bb11c=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x1bb11c['\x74\x65\x73\x74'](_0x3c6dad['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x2c55b3=function(_0x519fa5){var _0x17d56c=~-0x1>>0x1+0xff%0x0;if(_0x519fa5['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x17d56c)){_0x38c8d5(_0x519fa5);}};var _0x38c8d5=function(_0x29e798){var _0x3b2238=~-0x4>>0x1+0xff%0x0;if(_0x29e798['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x3b2238){_0x2c55b3(_0x29e798);}};if(!_0x1f1f04()){if(!_0x2c3795()){_0x2c55b3('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x2c55b3('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x2c55b3('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x3cd423();'use strict';const EventEmitter=require(_0x544f('0x0'))[_0x544f('0x1')];const net=require(_0x544f('0x2'));const tls=require(_0x544f('0x3'));const os=require('os');const crypto=require(_0x544f('0x4'));const stream=require('stream');const Transform=stream['Transform'];const PassThrough=stream['PassThrough'];const util=require('./util');const CONNECTION_TIMEOUT=0x2*0x3c*0x3e8;const SOCKET_TIMEOUT=0xa*0x3c*0x3e8;const GREETING_TIMEOUT=0x1e*0x3e8;class DataStream extends Transform{constructor(_0x436681){super(_0x436681);this[_0x544f('0x5')]=_0x436681||{};this[_0x544f('0x6')]='';this[_0x544f('0x7')]=0x0;this[_0x544f('0x8')]=0x0;this[_0x544f('0x9')]=![];}[_0x544f('0xa')](_0x9bb0f1,_0x2d1e9b,_0x16e1de){let _0x41f084=[];let _0x3f3019=0x0;let _0x290a45,_0x49c2e8,_0x59a2bb=0x0;let _0x1ca6d9;if(!_0x9bb0f1||!_0x9bb0f1['length']){return _0x16e1de();}if(typeof _0x9bb0f1===_0x544f('0xb')){_0x9bb0f1=Buffer[_0x544f('0xc')](_0x9bb0f1);}this[_0x544f('0x7')]+=_0x9bb0f1['length'];for(_0x290a45=0x0,_0x49c2e8=_0x9bb0f1[_0x544f('0xd')];_0x290a45<_0x49c2e8;_0x290a45++){if(_0x9bb0f1[_0x290a45]===0x2e){if(_0x290a45&&_0x9bb0f1[_0x290a45-0x1]===0xa||!_0x290a45&&(!this[_0x544f('0x9')]||this[_0x544f('0x9')]===0xa)){_0x1ca6d9=_0x9bb0f1[_0x544f('0xe')](_0x59a2bb,_0x290a45+0x1);_0x41f084[_0x544f('0xf')](_0x1ca6d9);_0x41f084[_0x544f('0xf')](Buffer[_0x544f('0xc')]('.'));_0x3f3019+=_0x1ca6d9[_0x544f('0xd')]+0x1;_0x59a2bb=_0x290a45+0x1;}}else if(_0x9bb0f1[_0x290a45]===0xa){if(_0x290a45&&_0x9bb0f1[_0x290a45-0x1]!==0xd||!_0x290a45&&this[_0x544f('0x9')]!==0xd){if(_0x290a45>_0x59a2bb){_0x1ca6d9=_0x9bb0f1['slice'](_0x59a2bb,_0x290a45);_0x41f084[_0x544f('0xf')](_0x1ca6d9);_0x3f3019+=_0x1ca6d9['length']+0x2;}else{_0x3f3019+=0x2;}_0x41f084[_0x544f('0xf')](Buffer[_0x544f('0xc')]('\x0d\x0a'));_0x59a2bb=_0x290a45+0x1;}}}if(_0x3f3019){if(_0x59a2bb<_0x9bb0f1[_0x544f('0xd')]){_0x1ca6d9=_0x9bb0f1[_0x544f('0xe')](_0x59a2bb);_0x41f084[_0x544f('0xf')](_0x1ca6d9);_0x3f3019+=_0x1ca6d9[_0x544f('0xd')];}this['outByteCount']+=_0x3f3019;this[_0x544f('0xf')](Buffer[_0x544f('0x10')](_0x41f084,_0x3f3019));}else{this[_0x544f('0x8')]+=_0x9bb0f1[_0x544f('0xd')];this[_0x544f('0xf')](_0x9bb0f1);}this[_0x544f('0x9')]=_0x9bb0f1[_0x9bb0f1['length']-0x1];_0x16e1de();}[_0x544f('0x11')](_0x307a6a){let _0x550b7f;if(this[_0x544f('0x9')]===0xa){_0x550b7f=Buffer['from'](_0x544f('0x12'));}else if(this[_0x544f('0x9')]===0xd){_0x550b7f=Buffer[_0x544f('0xc')]('\x0a.\x0d\x0a');}else{_0x550b7f=Buffer[_0x544f('0xc')](_0x544f('0x13'));}this[_0x544f('0x8')]+=_0x550b7f[_0x544f('0xd')];this[_0x544f('0xf')](_0x550b7f);_0x307a6a();}}class SMTPConnection extends EventEmitter{constructor(_0xd3f8c3){super(_0xd3f8c3);this['id']=crypto['randomBytes'](0x8)[_0x544f('0x14')]('base64')[_0x544f('0x15')](/\W/g,'');this[_0x544f('0x16')]=_0x544f('0x17');this[_0x544f('0x5')]=_0xd3f8c3||{};this[_0x544f('0x18')]=!!this[_0x544f('0x5')][_0x544f('0x19')];this['alreadySecured']=!!this[_0x544f('0x5')][_0x544f('0x1a')];this[_0x544f('0x1b')]=Number(this['options'][_0x544f('0x1b')])||(this[_0x544f('0x18')]?0x1d1:0x24b);this[_0x544f('0x1c')]=this[_0x544f('0x5')][_0x544f('0x1c')]||'localhost';if(typeof this[_0x544f('0x5')][_0x544f('0x19')]===_0x544f('0x1d')&&this[_0x544f('0x1b')]===0x1d1){this[_0x544f('0x18')]=!![];}this[_0x544f('0x1e')]=this[_0x544f('0x5')][_0x544f('0x1e')]||this[_0x544f('0x1f')]();this[_0x544f('0x20')]=util[_0x544f('0x21')](this[_0x544f('0x5')],{'component':this[_0x544f('0x5')]['component']||_0x544f('0x22'),'sid':this['id']});this[_0x544f('0x23')]=new Map();Object[_0x544f('0x24')](this[_0x544f('0x5')]['customAuth']||{})[_0x544f('0x25')](_0x495330=>{let _0x4ca423=(_0x495330||'')['toString']()[_0x544f('0x26')]()[_0x544f('0x27')]();if(!_0x4ca423){return;}this[_0x544f('0x23')]['set'](_0x4ca423,this[_0x544f('0x5')][_0x544f('0x23')][_0x495330]);});this[_0x544f('0x28')]=_0x544f('0x29');this['authenticated']=![];this[_0x544f('0x2a')]=![];this[_0x544f('0x19')]=!!this[_0x544f('0x18')];this[_0x544f('0x2b')]='';this[_0x544f('0x2c')]=[];this['lastServerResponse']=![];this['_socket']=![];this[_0x544f('0x2d')]=[];this[_0x544f('0x2e')]=![];this[_0x544f('0x2f')]=[];this['_maxAllowedSize']=0x0;this['_responseActions']=[];this[_0x544f('0x30')]=[];this['_greetingTimeout']=![];this['_connectionTimeout']=![];this['_destroyed']=![];this['_closing']=![];}[_0x544f('0x31')](_0x333b5c){if(typeof _0x333b5c===_0x544f('0x32')){this[_0x544f('0x33')](_0x544f('0x31'),()=>{this[_0x544f('0x20')][_0x544f('0x34')]({'tnx':_0x544f('0x35')},'SMTP\x20handshake\x20finished');_0x333b5c();});const _0x3f103d=this[_0x544f('0x36')](_0x544f('0x31'));if(_0x3f103d){return _0x333b5c(this[_0x544f('0x37')](_0x3f103d,_0x544f('0x38'),![],_0x544f('0x39')));}}let _0x27d146={'port':this[_0x544f('0x1b')],'host':this[_0x544f('0x1c')]};if(this[_0x544f('0x5')][_0x544f('0x3a')]){_0x27d146['localAddress']=this[_0x544f('0x5')][_0x544f('0x3a')];}let _0x174ef5=()=>{this[_0x544f('0x3b')]=setTimeout(()=>{this[_0x544f('0x3c')]('Connection\x20timeout','ETIMEDOUT',![],_0x544f('0x39'));},this[_0x544f('0x5')][_0x544f('0x3d')]||CONNECTION_TIMEOUT);this[_0x544f('0x3e')]['on'](_0x544f('0x3f'),_0x5c79e3=>{this[_0x544f('0x3c')](_0x5c79e3,_0x544f('0x38'),![],_0x544f('0x39'));});};if(this[_0x544f('0x5')][_0x544f('0x40')]){this['_socket']=this[_0x544f('0x5')][_0x544f('0x40')];if(this[_0x544f('0x18')]&&!this[_0x544f('0x41')]){setImmediate(()=>this[_0x544f('0x42')](_0x381224=>{if(_0x381224){this[_0x544f('0x3c')](new Error(_0x544f('0x43')+(_0x381224[_0x544f('0x44')]||_0x381224)),_0x544f('0x45'),![],'CONN');return;}this[_0x544f('0x46')]();}));}else{setImmediate(()=>this[_0x544f('0x46')]());}return;}else if(this['options']['socket']){this['_socket']=this[_0x544f('0x5')]['socket'];return util[_0x544f('0x47')](_0x27d146,(_0x14b87a,_0x18a4e1)=>{if(_0x14b87a){return setImmediate(()=>this['_onError'](_0x14b87a,_0x544f('0x48'),![],'CONN'));}this[_0x544f('0x20')][_0x544f('0x34')]({'tnx':_0x544f('0x49'),'source':_0x27d146['host'],'resolved':_0x18a4e1[_0x544f('0x1c')],'cached':!!_0x18a4e1[_0x544f('0x4a')]},_0x544f('0x4b'),_0x27d146[_0x544f('0x1c')],_0x18a4e1['host'],_0x18a4e1[_0x544f('0x4a')]?_0x544f('0x4c'):_0x544f('0x4d'));Object['keys'](_0x18a4e1)[_0x544f('0x25')](_0x38aef0=>{if(_0x38aef0[_0x544f('0x4e')](0x0)!=='_'&&_0x18a4e1[_0x38aef0]){_0x27d146[_0x38aef0]=_0x18a4e1[_0x38aef0];}});try{this['_socket'][_0x544f('0x31')](this[_0x544f('0x1b')],this[_0x544f('0x1c')],()=>{this[_0x544f('0x3e')]['setKeepAlive'](!![]);this[_0x544f('0x46')]();});_0x174ef5();}catch(_0x282cc2){return setImmediate(()=>this['_onError'](_0x282cc2,'ECONNECTION',![],'CONN'));}});}else if(this[_0x544f('0x18')]){if(this[_0x544f('0x5')][_0x544f('0x3')]){Object[_0x544f('0x24')](this['options']['tls'])[_0x544f('0x25')](_0xe5b9c6=>{_0x27d146[_0xe5b9c6]=this[_0x544f('0x5')][_0x544f('0x3')][_0xe5b9c6];});}return util[_0x544f('0x47')](_0x27d146,(_0x5d680e,_0x39e938)=>{if(_0x5d680e){return setImmediate(()=>this[_0x544f('0x3c')](_0x5d680e,_0x544f('0x48'),![],_0x544f('0x39')));}this[_0x544f('0x20')][_0x544f('0x34')]({'tnx':_0x544f('0x49'),'source':_0x27d146[_0x544f('0x1c')],'resolved':_0x39e938[_0x544f('0x1c')],'cached':!!_0x39e938[_0x544f('0x4a')]},_0x544f('0x4b'),_0x27d146[_0x544f('0x1c')],_0x39e938[_0x544f('0x1c')],_0x39e938[_0x544f('0x4a')]?_0x544f('0x4c'):_0x544f('0x4d'));Object[_0x544f('0x24')](_0x39e938)[_0x544f('0x25')](_0x31be52=>{if(_0x31be52[_0x544f('0x4e')](0x0)!=='_'&&_0x39e938[_0x31be52]){_0x27d146[_0x31be52]=_0x39e938[_0x31be52];}});try{this[_0x544f('0x3e')]=tls[_0x544f('0x31')](_0x27d146,()=>{this[_0x544f('0x3e')][_0x544f('0x4f')](!![]);this[_0x544f('0x46')]();});_0x174ef5();}catch(_0x17cdfa){return setImmediate(()=>this[_0x544f('0x3c')](_0x17cdfa,'ECONNECTION',![],_0x544f('0x39')));}});}else{return util['resolveHostname'](_0x27d146,(_0x3eaf19,_0x453d27)=>{if(_0x3eaf19){return setImmediate(()=>this[_0x544f('0x3c')](_0x3eaf19,_0x544f('0x48'),![],_0x544f('0x39')));}this[_0x544f('0x20')][_0x544f('0x34')]({'tnx':_0x544f('0x49'),'source':_0x27d146['host'],'resolved':_0x453d27['host'],'cached':!!_0x453d27['_cached']},_0x544f('0x4b'),_0x27d146[_0x544f('0x1c')],_0x453d27[_0x544f('0x1c')],_0x453d27['_cached']?'hit':_0x544f('0x4d'));Object[_0x544f('0x24')](_0x453d27)['forEach'](_0x844c6d=>{if(_0x844c6d[_0x544f('0x4e')](0x0)!=='_'&&_0x453d27[_0x844c6d]){_0x27d146[_0x844c6d]=_0x453d27[_0x844c6d];}});try{this['_socket']=net[_0x544f('0x31')](_0x27d146,()=>{this[_0x544f('0x3e')][_0x544f('0x4f')](!![]);this[_0x544f('0x46')]();});_0x174ef5();}catch(_0x1d87c5){return setImmediate(()=>this['_onError'](_0x1d87c5,'ECONNECTION',![],'CONN'));}});}}[_0x544f('0x50')](){this[_0x544f('0x51')](_0x544f('0x52'));this[_0x544f('0x53')]['push'](this['close']);}['close'](){clearTimeout(this[_0x544f('0x3b')]);clearTimeout(this[_0x544f('0x54')]);this[_0x544f('0x53')]=[];if(this['_closing']){return;}this['_closing']=!![];let _0x3dbf07=_0x544f('0x55');if(this[_0x544f('0x16')]===_0x544f('0x17')){_0x3dbf07='destroy';}this['logger'][_0x544f('0x34')]({'tnx':_0x544f('0x35')},'Closing\x20connection\x20to\x20the\x20server\x20using\x20\x22%s\x22',_0x3dbf07);let _0x2d8d25=this[_0x544f('0x3e')]&&this[_0x544f('0x3e')]['socket']||this[_0x544f('0x3e')];if(_0x2d8d25&&!_0x2d8d25[_0x544f('0x2a')]){try{this[_0x544f('0x3e')][_0x3dbf07]();}catch(_0x1e5813){}}this['_destroy']();}[_0x544f('0x56')](_0x3abc68,_0x4a4c5a){const _0x4396a1=this[_0x544f('0x36')](_0x544f('0x56'));if(_0x4396a1){return _0x4a4c5a(this['_formatError'](_0x4396a1,_0x544f('0x38'),![],_0x544f('0x57')));}this[_0x544f('0x58')]=_0x3abc68||{};this[_0x544f('0x59')]=(this[_0x544f('0x58')][_0x544f('0x5a')]||'')[_0x544f('0x14')]()[_0x544f('0x26')]()[_0x544f('0x27')]()||![];if(!this[_0x544f('0x59')]&&this['_auth'][_0x544f('0x5b')]&&!this[_0x544f('0x58')][_0x544f('0x5c')]){this[_0x544f('0x59')]='XOAUTH2';}else if(!this[_0x544f('0x59')]||this[_0x544f('0x59')]==='XOAUTH2'&&!this[_0x544f('0x58')][_0x544f('0x5b')]){this[_0x544f('0x59')]=(this['_supportedAuth'][0x0]||_0x544f('0x5d'))[_0x544f('0x27')]()[_0x544f('0x26')]();}if(this[_0x544f('0x59')]!==_0x544f('0x5e')&&(!this[_0x544f('0x58')][_0x544f('0x5c')]||!this[_0x544f('0x58')][_0x544f('0x5c')][_0x544f('0x5f')]||!this[_0x544f('0x58')][_0x544f('0x5c')][_0x544f('0x60')])){if(this[_0x544f('0x58')][_0x544f('0x5f')]&&this[_0x544f('0x58')][_0x544f('0x60')]){this['_auth']['credentials']={'user':this[_0x544f('0x58')][_0x544f('0x5f')],'pass':this[_0x544f('0x58')][_0x544f('0x60')],'options':this[_0x544f('0x58')]['options']};}else{return _0x4a4c5a(this[_0x544f('0x37')](_0x544f('0x61')+this[_0x544f('0x59')]+'\x22',_0x544f('0x62'),![],_0x544f('0x57')));}}if(this[_0x544f('0x23')]['has'](this[_0x544f('0x59')])){let _0x5c318c=this[_0x544f('0x23')][_0x544f('0x63')](this[_0x544f('0x59')]);let _0x3441c2;let _0x2be79e=![];let _0x2a9a32=()=>{if(_0x2be79e){return;}_0x2be79e=!![];this[_0x544f('0x20')][_0x544f('0x64')]({'tnx':_0x544f('0x35'),'username':this[_0x544f('0x58')][_0x544f('0x5f')],'action':_0x544f('0x65'),'method':this[_0x544f('0x59')]},_0x544f('0x66'),JSON[_0x544f('0x67')](this[_0x544f('0x58')][_0x544f('0x5f')]));this['authenticated']=!![];_0x4a4c5a(null,!![]);};let _0x47dbea=_0xe0a266=>{if(_0x2be79e){return;}_0x2be79e=!![];_0x4a4c5a(this[_0x544f('0x37')](_0xe0a266,_0x544f('0x62'),_0x3441c2,'AUTH\x20'+this['_authMethod']));};let _0xf642d4=_0x5c318c({'auth':this['_auth'],'method':this[_0x544f('0x59')],'extensions':[]['concat'](this[_0x544f('0x2f')]),'authMethods':[][_0x544f('0x10')](this['_supportedAuth']),'maxAllowedSize':this[_0x544f('0x68')]||![],'sendCommand':(_0x303498,_0x37ef51)=>{let _0x6fb53;if(!_0x37ef51){_0x6fb53=new Promise((_0x2a9a32,_0x47dbea)=>{_0x37ef51=util[_0x544f('0x69')](_0x2a9a32,_0x47dbea);});}this[_0x544f('0x53')][_0x544f('0xf')](_0xccc575=>{_0x3441c2=_0xccc575;let _0x23ddf5=_0xccc575[_0x544f('0x6a')](/^(\d+)(?:\s(\d+\.\d+\.\d+))?\s/);let _0x10ea07={'command':_0x303498,'response':_0xccc575};if(_0x23ddf5){_0x10ea07[_0x544f('0x6b')]=Number(_0x23ddf5[0x1])||0x0;if(_0x23ddf5[0x2]){_0x10ea07[_0x544f('0x6c')]=_0x23ddf5[0x2];}_0x10ea07[_0x544f('0x6d')]=_0xccc575[_0x544f('0x6e')](_0x23ddf5[0x0][_0x544f('0xd')]);}else{_0x10ea07[_0x544f('0x6d')]=_0xccc575;_0x10ea07['status']=0x0;}_0x37ef51(null,_0x10ea07);});setImmediate(()=>this[_0x544f('0x51')](_0x303498));return _0x6fb53;},'resolve':_0x2a9a32,'reject':_0x47dbea});if(_0xf642d4&&typeof _0xf642d4['catch']==='function'){_0xf642d4[_0x544f('0x6f')](_0x2a9a32)[_0x544f('0x70')](_0x47dbea);}return;}switch(this[_0x544f('0x59')]){case _0x544f('0x5e'):this[_0x544f('0x71')](![],_0x4a4c5a);return;case _0x544f('0x72'):this[_0x544f('0x53')][_0x544f('0xf')](_0x57ecdc=>{this[_0x544f('0x73')](_0x57ecdc,_0x4a4c5a);});this[_0x544f('0x51')](_0x544f('0x74'));return;case'PLAIN':this[_0x544f('0x53')][_0x544f('0xf')](_0x254de4=>{this[_0x544f('0x75')](_0x254de4,_0x4a4c5a);});this[_0x544f('0x51')]('AUTH\x20PLAIN\x20'+Buffer[_0x544f('0xc')](' '+this[_0x544f('0x58')]['credentials'][_0x544f('0x5f')]+' '+this['_auth'][_0x544f('0x5c')][_0x544f('0x60')],'utf-8')['toString']('base64'));return;case _0x544f('0x76'):this[_0x544f('0x53')][_0x544f('0xf')](_0x9d7fd7=>{this['_actionAUTH_CRAM_MD5'](_0x9d7fd7,_0x4a4c5a);});this[_0x544f('0x51')]('AUTH\x20CRAM-MD5');return;}return _0x4a4c5a(this[_0x544f('0x37')]('Unknown\x20authentication\x20method\x20\x22'+this[_0x544f('0x59')]+'\x22',_0x544f('0x62'),![],_0x544f('0x57')));}[_0x544f('0x77')](_0x3d9e9e,_0x469784,_0x53b65c){if(!_0x469784){return _0x53b65c(this[_0x544f('0x37')](_0x544f('0x78'),_0x544f('0x79'),![],_0x544f('0x57')));}const _0x5025a1=this['_isDestroyedMessage']('send\x20message');if(_0x5025a1){return _0x53b65c(this[_0x544f('0x37')](_0x5025a1,_0x544f('0x38'),![],'API'));}if(this['_maxAllowedSize']&&_0x3d9e9e[_0x544f('0x7a')]>this[_0x544f('0x68')]){return setImmediate(()=>{_0x53b65c(this['_formatError'](_0x544f('0x7b')+this[_0x544f('0x68')],'EMESSAGE',![],_0x544f('0x7c')));});}let _0x26b5b8=![];let _0x3f222a=function(){if(_0x26b5b8){return;}_0x26b5b8=!![];_0x53b65c(...arguments);};if(typeof _0x469784['on']===_0x544f('0x32')){_0x469784['on']('error',_0x47307e=>_0x3f222a(this['_formatError'](_0x47307e,_0x544f('0x7d'),![],_0x544f('0x57'))));}let _0x587cf2=Date[_0x544f('0x7e')]();this[_0x544f('0x7f')](_0x3d9e9e,(_0x2759dd,_0x32f7af)=>{if(_0x2759dd){return _0x3f222a(_0x2759dd);}let _0xeaf369=Date[_0x544f('0x7e')]();let _0x413804=this[_0x544f('0x80')]((_0x2759dd,_0x507e4f)=>{if(_0x2759dd){return _0x3f222a(_0x2759dd);}_0x32f7af[_0x544f('0x81')]=_0xeaf369-_0x587cf2;_0x32f7af[_0x544f('0x82')]=Date[_0x544f('0x7e')]()-_0xeaf369;_0x32f7af['messageSize']=_0x413804[_0x544f('0x8')];_0x32f7af['response']=_0x507e4f;return _0x3f222a(null,_0x32f7af);});if(typeof _0x469784[_0x544f('0x83')]==='function'){_0x469784[_0x544f('0x83')](_0x413804);}else{_0x413804[_0x544f('0x84')](_0x469784);_0x413804['end']();}});}['reset'](_0x320c54){this['_sendCommand']('RSET');this['_responseActions']['push'](_0x3d4710=>{if(_0x3d4710[_0x544f('0x4e')](0x0)!=='2'){return _0x320c54(this['_formatError'](_0x544f('0x85')+_0x3d4710,_0x544f('0x86'),_0x3d4710,_0x544f('0x87')));}this[_0x544f('0x2e')]=![];return _0x320c54(null,!![]);});}['help'](_0x317ad1){this[_0x544f('0x51')](_0x544f('0x88'));this[_0x544f('0x53')][_0x544f('0xf')](_0x4ccfba=>{if(_0x4ccfba[_0x544f('0x4e')](0x0)!=='2'){return _0x317ad1(this[_0x544f('0x37')](_0x544f('0x89')+_0x4ccfba,_0x544f('0x86'),_0x4ccfba,_0x544f('0x88')));}this[_0x544f('0x2e')]=![];return _0x317ad1(null,!![]);});}[_0x544f('0x46')](){clearTimeout(this[_0x544f('0x3b')]);this[_0x544f('0x20')][_0x544f('0x64')]({'tnx':'network','localAddress':this[_0x544f('0x3e')][_0x544f('0x3a')],'localPort':this[_0x544f('0x3e')][_0x544f('0x8a')],'remoteAddress':this['_socket'][_0x544f('0x8b')],'remotePort':this['_socket']['remotePort']},_0x544f('0x8c'),this[_0x544f('0x19')]?'Secure\x20connection':_0x544f('0x8d'),this['_socket'][_0x544f('0x8b')],this[_0x544f('0x3e')]['remotePort']);if(this[_0x544f('0x8e')]){this[_0x544f('0x8f')]();return;}this[_0x544f('0x16')]=_0x544f('0x90');this[_0x544f('0x3e')][_0x544f('0x91')](_0x544f('0x92'));this[_0x544f('0x3e')]['removeAllListeners'](_0x544f('0x93'));this[_0x544f('0x3e')][_0x544f('0x91')](_0x544f('0x8f'));this['_socket'][_0x544f('0x91')]('end');this['_socket']['on'](_0x544f('0x92'),_0x520588=>this[_0x544f('0x94')](_0x520588));this[_0x544f('0x3e')][_0x544f('0x33')]('close',_0x1d50d5=>this[_0x544f('0x95')](_0x1d50d5));this[_0x544f('0x3e')]['once'](_0x544f('0x55'),()=>this['_onEnd']());this[_0x544f('0x3e')][_0x544f('0x96')](this['options']['socketTimeout']||SOCKET_TIMEOUT);this[_0x544f('0x3e')]['on']('timeout',()=>this[_0x544f('0x97')]());this[_0x544f('0x54')]=setTimeout(()=>{if(this['_socket']&&!this['_destroyed']&&this[_0x544f('0x53')][0x0]===this[_0x544f('0x98')]){this['_onError'](_0x544f('0x99'),_0x544f('0x9a'),![],'CONN');}},this['options'][_0x544f('0x9b')]||GREETING_TIMEOUT);this[_0x544f('0x53')]['push'](this['_actionGreeting']);this[_0x544f('0x3e')][_0x544f('0x9c')]();}[_0x544f('0x94')](_0x378030){if(this[_0x544f('0x8e')]||!_0x378030||!_0x378030[_0x544f('0xd')]){return;}let _0x2b3490=(_0x378030||'')['toString']('binary');let _0x43e20a=(this[_0x544f('0x2b')]+_0x2b3490)[_0x544f('0x9d')](/\r?\n/);let _0x429778;this[_0x544f('0x2b')]=_0x43e20a[_0x544f('0x9e')]();for(let _0x4f9fba=0x0,_0x3d15d5=_0x43e20a[_0x544f('0xd')];_0x4f9fba<_0x3d15d5;_0x4f9fba++){if(this[_0x544f('0x2c')]['length']){_0x429778=this[_0x544f('0x2c')][this[_0x544f('0x2c')][_0x544f('0xd')]-0x1];if(/^\d+-/['test'](_0x429778[_0x544f('0x9d')]('\x0a')[_0x544f('0x9e')]())){this[_0x544f('0x2c')][this[_0x544f('0x2c')]['length']-0x1]+='\x0a'+_0x43e20a[_0x4f9fba];continue;}}this[_0x544f('0x2c')][_0x544f('0xf')](_0x43e20a[_0x4f9fba]);}this[_0x544f('0x9f')]();}[_0x544f('0x3c')](_0x30a12f,_0x1bda66,_0x870913,_0x212600){clearTimeout(this[_0x544f('0x3b')]);clearTimeout(this[_0x544f('0x54')]);if(this[_0x544f('0x8e')]){return;}_0x30a12f=this[_0x544f('0x37')](_0x30a12f,_0x1bda66,_0x870913,_0x212600);this[_0x544f('0x20')][_0x544f('0x3f')](_0x870913,_0x30a12f[_0x544f('0x44')]);this[_0x544f('0xa0')](_0x544f('0x3f'),_0x30a12f);this[_0x544f('0x8f')]();}['_formatError'](_0x562459,_0x1afd00,_0x3c06b4,_0x312dc9){let _0x3f6faf;if(/Error\]$/i['test'](Object['prototype'][_0x544f('0x14')]['call'](_0x562459))){_0x3f6faf=_0x562459;}else{_0x3f6faf=new Error(_0x562459);}if(_0x1afd00&&_0x1afd00!=='Error'){_0x3f6faf[_0x544f('0x6c')]=_0x1afd00;}if(_0x3c06b4){_0x3f6faf[_0x544f('0xa1')]=_0x3c06b4;_0x3f6faf['message']+=':\x20'+_0x3c06b4;}let _0x1f2747=typeof _0x3c06b4===_0x544f('0xb')&&Number((_0x3c06b4['match'](/^\d+/)||[])[0x0])||![];if(_0x1f2747){_0x3f6faf[_0x544f('0xa2')]=_0x1f2747;}if(_0x312dc9){_0x3f6faf[_0x544f('0xa3')]=_0x312dc9;}return _0x3f6faf;}[_0x544f('0x95')](){this[_0x544f('0x20')][_0x544f('0x64')]({'tnx':'network'},_0x544f('0xa4'));if(this[_0x544f('0xa5')]&&!this[_0x544f('0x8e')]){return this['_onError'](new Error(_0x544f('0xa6')),_0x544f('0x45'),![],_0x544f('0x39'));}else if(![this['_actionGreeting'],this[_0x544f('0x8f')]][_0x544f('0xa7')](this['_responseActions'][0x0])&&!this[_0x544f('0x8e')]){return this[_0x544f('0x3c')](new Error(_0x544f('0xa6')),_0x544f('0x38'),![],_0x544f('0x39'));}this[_0x544f('0xa8')]();}[_0x544f('0xa9')](){this[_0x544f('0xa8')]();}[_0x544f('0x97')](){return this['_onError'](new Error(_0x544f('0xaa')),_0x544f('0x9a'),![],_0x544f('0x39'));}[_0x544f('0xa8')](){if(this[_0x544f('0x8e')]){return;}this[_0x544f('0x8e')]=!![];this['emit'](_0x544f('0x55'));}[_0x544f('0x42')](_0x27b9e9){this[_0x544f('0x3e')][_0x544f('0x91')](_0x544f('0x92'));this[_0x544f('0x3e')][_0x544f('0x91')](_0x544f('0x93'));let _0x408054=this[_0x544f('0x3e')];let _0x696e0e={'socket':this[_0x544f('0x3e')],'host':this[_0x544f('0x1c')]};Object[_0x544f('0x24')](this[_0x544f('0x5')][_0x544f('0x3')]||{})[_0x544f('0x25')](_0x3000c9=>{_0x696e0e[_0x3000c9]=this['options'][_0x544f('0x3')][_0x3000c9];});this[_0x544f('0xa5')]=!![];this[_0x544f('0x3e')]=tls[_0x544f('0x31')](_0x696e0e,()=>{this[_0x544f('0x19')]=!![];this[_0x544f('0xa5')]=![];this['_socket']['on'](_0x544f('0x92'),_0x41e73a=>this['_onData'](_0x41e73a));_0x408054[_0x544f('0x91')](_0x544f('0x8f'));_0x408054[_0x544f('0x91')](_0x544f('0x55'));return _0x27b9e9(null,!![]);});this[_0x544f('0x3e')]['on'](_0x544f('0x3f'),_0x47e098=>this['_onError'](_0x47e098,_0x544f('0xab'),![],_0x544f('0x39')));this[_0x544f('0x3e')][_0x544f('0x33')](_0x544f('0x8f'),_0xa95abb=>this[_0x544f('0x95')](_0xa95abb));this[_0x544f('0x3e')][_0x544f('0x33')](_0x544f('0x55'),()=>this[_0x544f('0xa9')]());this['_socket'][_0x544f('0x96')](this[_0x544f('0x5')][_0x544f('0xac')]||SOCKET_TIMEOUT);this['_socket']['on'](_0x544f('0x93'),()=>this['_onTimeout']());_0x408054[_0x544f('0x9c')]();}[_0x544f('0x9f')](){if(!this[_0x544f('0x2c')][_0x544f('0xd')]){return![];}let _0x140345=this['lastServerResponse']=(this['_responseQueue'][_0x544f('0xad')]()||'')['toString']();if(/^\d+-/['test'](_0x140345[_0x544f('0x9d')]('\x0a')[_0x544f('0x9e')]())){return;}if(this[_0x544f('0x5')]['debug']||this['options'][_0x544f('0xae')]){this['logger'][_0x544f('0x34')]({'tnx':_0x544f('0xaf')},_0x140345[_0x544f('0x15')](/\r?\n$/,''));}if(!_0x140345[_0x544f('0x26')]()){setImmediate(()=>this[_0x544f('0x9f')](!![]));}let _0x4a6bc4=this[_0x544f('0x53')][_0x544f('0xad')]();if(typeof _0x4a6bc4===_0x544f('0x32')){_0x4a6bc4[_0x544f('0xb0')](this,_0x140345);setImmediate(()=>this[_0x544f('0x9f')](!![]));}else{return this[_0x544f('0x3c')](new Error(_0x544f('0xb1')),'EPROTOCOL',_0x140345,_0x544f('0x39'));}}['_sendCommand'](_0x408043){if(this['_destroyed']){return;}if(this['_socket']['destroyed']){return this[_0x544f('0x8f')]();}if(this['options'][_0x544f('0x34')]||this['options'][_0x544f('0xae')]){this[_0x544f('0x20')][_0x544f('0x34')]({'tnx':_0x544f('0xb2')},(_0x408043||'')[_0x544f('0x14')]()[_0x544f('0x15')](/\r?\n$/,''));}this['_socket']['write'](Buffer['from'](_0x408043+'\x0d\x0a',_0x544f('0xb3')));}[_0x544f('0x7f')](_0x120377,_0x4e462f){let _0x29530a=[];let _0x4b90fd=![];this[_0x544f('0x2e')]=_0x120377||{};this[_0x544f('0x2e')]['from']=(this[_0x544f('0x2e')][_0x544f('0xc')]&&this['_envelope']['from']['address']||this[_0x544f('0x2e')][_0x544f('0xc')]||'')[_0x544f('0x14')]()[_0x544f('0x26')]();this[_0x544f('0x2e')]['to']=[][_0x544f('0x10')](this['_envelope']['to']||[])[_0x544f('0xb4')](_0x56f066=>(_0x56f066&&_0x56f066[_0x544f('0xb5')]||_0x56f066||'')[_0x544f('0x14')]()[_0x544f('0x26')]());if(!this['_envelope']['to'][_0x544f('0xd')]){return _0x4e462f(this['_formatError'](_0x544f('0xb6'),'EENVELOPE',![],'API'));}if(this[_0x544f('0x2e')][_0x544f('0xc')]&&/[\r\n<>]/['test'](this[_0x544f('0x2e')][_0x544f('0xc')])){return _0x4e462f(this[_0x544f('0x37')](_0x544f('0xb7')+JSON['stringify'](this[_0x544f('0x2e')]['from']),_0x544f('0xb8'),![],_0x544f('0x57')));}if(/[\x80-\uFFFF]/[_0x544f('0xb9')](this[_0x544f('0x2e')][_0x544f('0xc')])){_0x4b90fd=!![];}for(let _0x449165=0x0,_0x1caea8=this[_0x544f('0x2e')]['to'][_0x544f('0xd')];_0x449165<_0x1caea8;_0x449165++){if(!this['_envelope']['to'][_0x449165]||/[\r\n<>]/[_0x544f('0xb9')](this['_envelope']['to'][_0x449165])){return _0x4e462f(this['_formatError']('Invalid\x20recipient\x20'+JSON[_0x544f('0x67')](this['_envelope']['to'][_0x449165]),_0x544f('0xb8'),![],'API'));}if(/[\x80-\uFFFF]/[_0x544f('0xb9')](this[_0x544f('0x2e')]['to'][_0x449165])){_0x4b90fd=!![];}}this[_0x544f('0x2e')][_0x544f('0xba')]=JSON[_0x544f('0xbb')](JSON[_0x544f('0x67')](this['_envelope']['to']||[]));this[_0x544f('0x2e')]['rejected']=[];this[_0x544f('0x2e')][_0x544f('0xbc')]=[];this[_0x544f('0x2e')][_0x544f('0xbd')]=[];if(this[_0x544f('0x2e')][_0x544f('0xbe')]){try{this[_0x544f('0x2e')][_0x544f('0xbe')]=this['_setDsnEnvelope'](this['_envelope'][_0x544f('0xbe')]);}catch(_0x55533a){return _0x4e462f(this[_0x544f('0x37')](_0x544f('0xbf')+_0x55533a['message'],_0x544f('0xb8'),![],_0x544f('0x57')));}}this[_0x544f('0x53')][_0x544f('0xf')](_0x14a0fa=>{this[_0x544f('0xc0')](_0x14a0fa,_0x4e462f);});if(_0x4b90fd&&this[_0x544f('0x2f')][_0x544f('0xa7')](_0x544f('0xc1'))){_0x29530a[_0x544f('0xf')]('SMTPUTF8');this['_usingSmtpUtf8']=!![];}if(this[_0x544f('0x2e')]['use8BitMime']&&this[_0x544f('0x2f')]['includes'](_0x544f('0xc2'))){_0x29530a['push'](_0x544f('0xc3'));this[_0x544f('0xc4')]=!![];}if(this[_0x544f('0x2e')][_0x544f('0x7a')]&&this[_0x544f('0x2f')]['includes'](_0x544f('0xc5'))){_0x29530a[_0x544f('0xf')](_0x544f('0xc6')+this[_0x544f('0x2e')][_0x544f('0x7a')]);}if(this[_0x544f('0x2e')]['dsn']&&this[_0x544f('0x2f')][_0x544f('0xa7')]('DSN')){if(this['_envelope'][_0x544f('0xbe')][_0x544f('0xc7')]){_0x29530a[_0x544f('0xf')](_0x544f('0xc8')+util[_0x544f('0xc9')](this[_0x544f('0x2e')][_0x544f('0xbe')][_0x544f('0xc7')]));}if(this[_0x544f('0x2e')][_0x544f('0xbe')][_0x544f('0xca')]){_0x29530a[_0x544f('0xf')](_0x544f('0xcb')+util[_0x544f('0xc9')](this[_0x544f('0x2e')][_0x544f('0xbe')][_0x544f('0xca')]));}}this[_0x544f('0x51')](_0x544f('0xcc')+this[_0x544f('0x2e')][_0x544f('0xc')]+'>'+(_0x29530a[_0x544f('0xd')]?'\x20'+_0x29530a[_0x544f('0xcd')]('\x20'):''));}[_0x544f('0xce')](_0x4067ee){let _0x54c57f=(_0x4067ee[_0x544f('0xc7')]||_0x4067ee[_0x544f('0xcf')]||'')['toString']()[_0x544f('0x27')]()||null;if(_0x54c57f){switch(_0x54c57f){case'HDRS':case _0x544f('0xd0'):_0x54c57f=_0x544f('0xd1');break;case'FULL':case _0x544f('0xd2'):_0x54c57f=_0x544f('0xd3');break;}}if(_0x54c57f&&!['FULL',_0x544f('0xd1')]['includes'](_0x54c57f)){throw new Error(_0x544f('0xd4')+JSON[_0x544f('0x67')](_0x54c57f));}let _0x16b25b=(_0x4067ee[_0x544f('0xca')]||_0x4067ee['id']||'')['toString']()||null;let _0x3c872f=_0x4067ee[_0x544f('0xd5')]||null;if(_0x3c872f){if(typeof _0x3c872f==='string'){_0x3c872f=_0x3c872f['split'](',');}_0x3c872f=_0x3c872f['map'](_0x419935=>_0x419935[_0x544f('0x26')]()['toUpperCase']());let _0x508169=[_0x544f('0xd6'),_0x544f('0xd7'),_0x544f('0xd8'),_0x544f('0xd9')];let _0x4ead19=_0x3c872f[_0x544f('0xda')](_0x42a76d=>!_0x508169[_0x544f('0xa7')](_0x42a76d));if(_0x4ead19[_0x544f('0xd')]||_0x3c872f[_0x544f('0xd')]>0x1&&_0x3c872f[_0x544f('0xa7')](_0x544f('0xd6'))){throw new Error(_0x544f('0xdb')+JSON[_0x544f('0x67')](_0x3c872f[_0x544f('0xcd')](',')));}_0x3c872f=_0x3c872f[_0x544f('0xcd')](',');}let _0x521109=(_0x4067ee[_0x544f('0xdc')]||_0x4067ee[_0x544f('0xdd')]||'')[_0x544f('0x14')]()||null;if(_0x521109&&_0x521109['indexOf'](';')<0x0){_0x521109=_0x544f('0xde')+_0x521109;}return{'ret':_0x54c57f,'envid':_0x16b25b,'notify':_0x3c872f,'orcpt':_0x521109};}[_0x544f('0xdf')](){let _0x394a59=[];if(this['_envelope']['dsn']&&this[_0x544f('0x2f')][_0x544f('0xa7')]('DSN')){if(this[_0x544f('0x2e')][_0x544f('0xbe')][_0x544f('0xd5')]){_0x394a59['push'](_0x544f('0xe0')+util[_0x544f('0xc9')](this[_0x544f('0x2e')]['dsn'][_0x544f('0xd5')]));}if(this[_0x544f('0x2e')][_0x544f('0xbe')][_0x544f('0xdc')]){_0x394a59['push']('ORCPT='+util[_0x544f('0xc9')](this[_0x544f('0x2e')][_0x544f('0xbe')][_0x544f('0xdc')]));}}return _0x394a59['length']?'\x20'+_0x394a59[_0x544f('0xcd')]('\x20'):'';}[_0x544f('0x80')](_0x3a1113){let _0x2d4f07=new DataStream();let _0x5f3460;if(this[_0x544f('0x5')][_0x544f('0xe1')]){this['_envelope'][_0x544f('0xbd')][_0x544f('0x25')]((_0x5d0c8d,_0x3e0edb)=>{let _0x297f98=_0x3e0edb===this[_0x544f('0x2e')][_0x544f('0xbd')][_0x544f('0xd')]-0x1;this['_responseActions']['push'](_0x3aefa4=>{this[_0x544f('0xe2')](_0x5d0c8d,_0x297f98,_0x3aefa4,_0x3a1113);});});}else{this[_0x544f('0x53')][_0x544f('0xf')](_0x5a80c1=>{this[_0x544f('0xe3')](_0x5a80c1,_0x3a1113);});}_0x2d4f07[_0x544f('0x83')](this[_0x544f('0x3e')],{'end':![]});if(this[_0x544f('0x5')][_0x544f('0x34')]){_0x5f3460=new PassThrough();_0x5f3460['on'](_0x544f('0xe4'),()=>{let _0x598af8;while(_0x598af8=_0x5f3460[_0x544f('0xe5')]()){this[_0x544f('0x20')][_0x544f('0x34')]({'tnx':_0x544f('0x44')},_0x598af8['toString'](_0x544f('0xe6'))[_0x544f('0x15')](/\r?\n$/,''));}});_0x2d4f07[_0x544f('0x83')](_0x5f3460);}_0x2d4f07[_0x544f('0x33')](_0x544f('0x55'),()=>{this[_0x544f('0x20')]['info']({'tnx':'message','inByteCount':_0x2d4f07['inByteCount'],'outByteCount':_0x2d4f07[_0x544f('0x8')]},_0x544f('0xe7'),_0x2d4f07[_0x544f('0x8')],_0x2d4f07['inByteCount']);});return _0x2d4f07;}[_0x544f('0x98')](_0x2ce575){clearTimeout(this[_0x544f('0x54')]);if(_0x2ce575[_0x544f('0x6e')](0x0,0x3)!==_0x544f('0xe8')){this[_0x544f('0x3c')](new Error(_0x544f('0xe9')+_0x2ce575),_0x544f('0x86'),_0x2ce575,'CONN');return;}if(this['options'][_0x544f('0xe1')]){this[_0x544f('0x53')][_0x544f('0xf')](this[_0x544f('0xea')]);this['_sendCommand']('LHLO\x20'+this[_0x544f('0x1e')]);}else{this[_0x544f('0x53')]['push'](this[_0x544f('0xeb')]);this[_0x544f('0x51')](_0x544f('0xec')+this[_0x544f('0x1e')]);}}[_0x544f('0xea')](_0xc8c96){if(_0xc8c96[_0x544f('0x4e')](0x0)!=='2'){this[_0x544f('0x3c')](new Error('Invalid\x20LHLO.\x20response='+_0xc8c96),'EPROTOCOL',_0xc8c96,_0x544f('0xed'));return;}this['_actionEHLO'](_0xc8c96);}[_0x544f('0xeb')](_0x278ce7){let _0x1753ac;if(_0x278ce7[_0x544f('0x6e')](0x0,0x3)===_0x544f('0xee')){this['_onError'](new Error(_0x544f('0xef')+_0x278ce7),_0x544f('0x38'),_0x278ce7,_0x544f('0xf0'));return;}if(_0x278ce7[_0x544f('0x4e')](0x0)!=='2'){if(this[_0x544f('0x5')][_0x544f('0xf1')]){this[_0x544f('0x3c')](new Error(_0x544f('0xf2')+_0x278ce7),_0x544f('0x38'),_0x278ce7,'EHLO');return;}this[_0x544f('0x53')][_0x544f('0xf')](this[_0x544f('0xf3')]);this[_0x544f('0x51')](_0x544f('0xf4')+this[_0x544f('0x1e')]);return;}if(!this[_0x544f('0x19')]&&!this[_0x544f('0x5')]['ignoreTLS']&&(/[ -]STARTTLS\b/im['test'](_0x278ce7)||this['options']['requireTLS'])){this[_0x544f('0x51')](_0x544f('0xf5'));this[_0x544f('0x53')][_0x544f('0xf')](this[_0x544f('0xf6')]);return;}if(/[ -]SMTPUTF8\b/im[_0x544f('0xb9')](_0x278ce7)){this[_0x544f('0x2f')][_0x544f('0xf')](_0x544f('0xc1'));}if(/[ -]DSN\b/im['test'](_0x278ce7)){this[_0x544f('0x2f')][_0x544f('0xf')](_0x544f('0xf7'));}if(/[ -]8BITMIME\b/im[_0x544f('0xb9')](_0x278ce7)){this['_supportedExtensions'][_0x544f('0xf')](_0x544f('0xc2'));}if(/[ -]PIPELINING\b/im[_0x544f('0xb9')](_0x278ce7)){this[_0x544f('0x2f')][_0x544f('0xf')](_0x544f('0xf8'));}if(/AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)PLAIN/i[_0x544f('0xb9')](_0x278ce7)){this[_0x544f('0x2d')][_0x544f('0xf')](_0x544f('0x5d'));}if(/AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)LOGIN/i['test'](_0x278ce7)){this['_supportedAuth'][_0x544f('0xf')](_0x544f('0x72'));}if(/AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)CRAM-MD5/i[_0x544f('0xb9')](_0x278ce7)){this[_0x544f('0x2d')][_0x544f('0xf')](_0x544f('0x76'));}if(/AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)XOAUTH2/i[_0x544f('0xb9')](_0x278ce7)){this[_0x544f('0x2d')][_0x544f('0xf')]('XOAUTH2');}if(_0x1753ac=_0x278ce7[_0x544f('0x6a')](/[ -]SIZE(?:[ \t]+(\d+))?/im)){this['_supportedExtensions'][_0x544f('0xf')](_0x544f('0xc5'));this[_0x544f('0x68')]=Number(_0x1753ac[0x1])||0x0;}this[_0x544f('0xa0')](_0x544f('0x31'));}[_0x544f('0xf3')](_0x3ecec2){if(_0x3ecec2['charAt'](0x0)!=='2'){this[_0x544f('0x3c')](new Error(_0x544f('0xf9')+_0x3ecec2),_0x544f('0x86'),_0x3ecec2,_0x544f('0xfa'));return;}this[_0x544f('0xa0')](_0x544f('0x31'));}[_0x544f('0xf6')](_0x1697eb){if(_0x1697eb['charAt'](0x0)!=='2'){if(this[_0x544f('0x5')][_0x544f('0xfb')]){this[_0x544f('0x20')][_0x544f('0x64')]({'tnx':_0x544f('0x35')},_0x544f('0xfc'));return this[_0x544f('0xa0')](_0x544f('0x31'));}this[_0x544f('0x3c')](new Error(_0x544f('0xfd')),_0x544f('0x45'),_0x1697eb,'STARTTLS');return;}this[_0x544f('0x42')]((_0x13595f,_0x5068f3)=>{if(_0x13595f){this[_0x544f('0x3c')](new Error(_0x544f('0x43')+(_0x13595f[_0x544f('0x44')]||_0x13595f)),_0x544f('0x45'),![],'STARTTLS');return;}this[_0x544f('0x20')][_0x544f('0x64')]({'tnx':_0x544f('0x35')},_0x544f('0xfe'));if(_0x5068f3){if(this[_0x544f('0x5')][_0x544f('0xe1')]){this['_responseActions']['push'](this['_actionLHLO']);this[_0x544f('0x51')](_0x544f('0xff')+this[_0x544f('0x1e')]);}else{this[_0x544f('0x53')][_0x544f('0xf')](this[_0x544f('0xeb')]);this[_0x544f('0x51')](_0x544f('0xec')+this[_0x544f('0x1e')]);}}else{this['emit'](_0x544f('0x31'));}});}[_0x544f('0x73')](_0x6a551c,_0x15febc){if(!/^334[ -]/[_0x544f('0xb9')](_0x6a551c)){_0x15febc(this[_0x544f('0x37')](_0x544f('0x100'),_0x544f('0x62'),_0x6a551c,_0x544f('0x74')));return;}this[_0x544f('0x53')][_0x544f('0xf')](_0x6a551c=>{this[_0x544f('0x101')](_0x6a551c,_0x15febc);});this[_0x544f('0x51')](Buffer[_0x544f('0xc')](this[_0x544f('0x58')][_0x544f('0x5c')]['user']+'',_0x544f('0xb3'))[_0x544f('0x14')](_0x544f('0x102')));}[_0x544f('0x103')](_0x3f6c99,_0x37b21f){let _0x333022=_0x3f6c99[_0x544f('0x6a')](/^334\s+(.+)$/);let _0x1b92b5='';if(!_0x333022){return _0x37b21f(this[_0x544f('0x37')](_0x544f('0x104'),'EAUTH',_0x3f6c99,_0x544f('0x105')));}else{_0x1b92b5=_0x333022[0x1];}let _0x312084=Buffer[_0x544f('0xc')](_0x1b92b5,_0x544f('0x102'))[_0x544f('0x14')](_0x544f('0x106')),_0xfabd79=crypto[_0x544f('0x107')](_0x544f('0x108'),this[_0x544f('0x58')][_0x544f('0x5c')][_0x544f('0x60')]);_0xfabd79[_0x544f('0x109')](_0x312084);let _0x50ea5d=_0xfabd79[_0x544f('0x10a')](_0x544f('0x10b'));let _0x248f5d=this[_0x544f('0x58')][_0x544f('0x5c')][_0x544f('0x5f')]+'\x20'+_0x50ea5d;this[_0x544f('0x53')][_0x544f('0xf')](_0x3f6c99=>{this['_actionAUTH_CRAM_MD5_PASS'](_0x3f6c99,_0x37b21f);});this[_0x544f('0x51')](Buffer[_0x544f('0xc')](_0x248f5d)['toString'](_0x544f('0x102')));}[_0x544f('0x10c')](_0x130db2,_0x3158e8){if(!_0x130db2[_0x544f('0x6a')](/^235\s+/)){return _0x3158e8(this[_0x544f('0x37')]('Invalid\x20login\x20sequence\x20while\x20waiting\x20for\x20\x22235\x22',_0x544f('0x62'),_0x130db2,'AUTH\x20CRAM-MD5'));}this[_0x544f('0x20')]['info']({'tnx':_0x544f('0x35'),'username':this[_0x544f('0x58')][_0x544f('0x5f')],'action':_0x544f('0x65'),'method':this['_authMethod']},_0x544f('0x66'),JSON['stringify'](this[_0x544f('0x58')][_0x544f('0x5f')]));this[_0x544f('0x65')]=!![];_0x3158e8(null,!![]);}[_0x544f('0x101')](_0x19f967,_0x53983a){if(!/^334[ -]/[_0x544f('0xb9')](_0x19f967)){return _0x53983a(this[_0x544f('0x37')](_0x544f('0x10d'),_0x544f('0x62'),_0x19f967,'AUTH\x20LOGIN'));}this['_responseActions'][_0x544f('0xf')](_0x19f967=>{this[_0x544f('0x75')](_0x19f967,_0x53983a);});this[_0x544f('0x51')](Buffer[_0x544f('0xc')](this['_auth'][_0x544f('0x5c')][_0x544f('0x60')]+'',_0x544f('0xb3'))['toString'](_0x544f('0x102')));}[_0x544f('0x75')](_0x5de9f8,_0x4cc101,_0x9de9aa){if(!_0x9de9aa&&typeof _0x4cc101===_0x544f('0x32')){_0x9de9aa=_0x4cc101;_0x4cc101=![];}if(_0x5de9f8[_0x544f('0x6e')](0x0,0x3)===_0x544f('0x10e')){this['_responseActions'][_0x544f('0xf')](_0x5de9f8=>{if(_0x4cc101||this[_0x544f('0x59')]!==_0x544f('0x5e')){this[_0x544f('0x75')](_0x5de9f8,!![],_0x9de9aa);}else{setImmediate(()=>this[_0x544f('0x71')](!![],_0x9de9aa));}});this[_0x544f('0x51')]('');return;}if(_0x5de9f8[_0x544f('0x4e')](0x0)!=='2'){this[_0x544f('0x20')]['info']({'tnx':_0x544f('0x35'),'username':this[_0x544f('0x58')]['user'],'action':_0x544f('0x10f'),'method':this[_0x544f('0x59')]},_0x544f('0x110'),JSON['stringify'](this['_auth'][_0x544f('0x5f')]));return _0x9de9aa(this[_0x544f('0x37')](_0x544f('0x111'),_0x544f('0x62'),_0x5de9f8,_0x544f('0x112')+this['_authMethod']));}this['logger'][_0x544f('0x64')]({'tnx':_0x544f('0x35'),'username':this[_0x544f('0x58')][_0x544f('0x5f')],'action':_0x544f('0x65'),'method':this['_authMethod']},'User\x20%s\x20authenticated',JSON['stringify'](this[_0x544f('0x58')][_0x544f('0x5f')]));this['authenticated']=!![];_0x9de9aa(null,!![]);}[_0x544f('0xc0')](_0x53bb8f,_0x5a1c9a){let _0x102f92,_0x2d0522;if(Number(_0x53bb8f[_0x544f('0x4e')](0x0))!==0x2){if(this[_0x544f('0x113')]&&/^550 /[_0x544f('0xb9')](_0x53bb8f)&&/[\x80-\uFFFF]/[_0x544f('0xb9')](this[_0x544f('0x2e')][_0x544f('0xc')])){_0x102f92=_0x544f('0x114');}else{_0x102f92='Mail\x20command\x20failed';}return _0x5a1c9a(this[_0x544f('0x37')](_0x102f92,_0x544f('0xb8'),_0x53bb8f,_0x544f('0x7c')));}if(!this[_0x544f('0x2e')][_0x544f('0xba')][_0x544f('0xd')]){return _0x5a1c9a(this[_0x544f('0x37')](_0x544f('0x115'),'EENVELOPE',![],_0x544f('0x57')));}else{this['_recipientQueue']=[];if(this[_0x544f('0x2f')]['includes'](_0x544f('0xf8'))){while(this[_0x544f('0x2e')][_0x544f('0xba')][_0x544f('0xd')]){_0x2d0522=this['_envelope'][_0x544f('0xba')][_0x544f('0xad')]();this[_0x544f('0x30')]['push'](_0x2d0522);this['_responseActions'][_0x544f('0xf')](_0x53bb8f=>{this['_actionRCPT'](_0x53bb8f,_0x5a1c9a);});this[_0x544f('0x51')](_0x544f('0x116')+_0x2d0522+'>'+this['_getDsnRcptToArgs']());}}else{_0x2d0522=this[_0x544f('0x2e')][_0x544f('0xba')]['shift']();this['_recipientQueue'][_0x544f('0xf')](_0x2d0522);this[_0x544f('0x53')][_0x544f('0xf')](_0x53bb8f=>{this['_actionRCPT'](_0x53bb8f,_0x5a1c9a);});this[_0x544f('0x51')]('RCPT\x20TO:<'+_0x2d0522+'>'+this[_0x544f('0xdf')]());}}}[_0x544f('0x117')](_0x43e8af,_0x3f84ff){let _0x1a5c88,_0x10803e,_0x55aba5=this[_0x544f('0x30')][_0x544f('0xad')]();if(Number(_0x43e8af[_0x544f('0x4e')](0x0))!==0x2){if(this[_0x544f('0x113')]&&/^553 /[_0x544f('0xb9')](_0x43e8af)&&/[\x80-\uFFFF]/[_0x544f('0xb9')](_0x55aba5)){_0x1a5c88=_0x544f('0x114');}else{_0x1a5c88=_0x544f('0x118');}this[_0x544f('0x2e')][_0x544f('0x119')]['push'](_0x55aba5);_0x10803e=this[_0x544f('0x37')](_0x1a5c88,_0x544f('0xb8'),_0x43e8af,'RCPT\x20TO');_0x10803e['recipient']=_0x55aba5;this['_envelope'][_0x544f('0xbc')]['push'](_0x10803e);}else{this[_0x544f('0x2e')]['accepted'][_0x544f('0xf')](_0x55aba5);}if(!this[_0x544f('0x2e')][_0x544f('0xba')][_0x544f('0xd')]&&!this[_0x544f('0x30')]['length']){if(this['_envelope'][_0x544f('0x119')][_0x544f('0xd')]<this[_0x544f('0x2e')]['to']['length']){this[_0x544f('0x53')][_0x544f('0xf')](_0x43e8af=>{this[_0x544f('0x11a')](_0x43e8af,_0x3f84ff);});this[_0x544f('0x51')](_0x544f('0x11b'));}else{_0x10803e=this[_0x544f('0x37')](_0x544f('0x11c'),_0x544f('0xb8'),_0x43e8af,_0x544f('0x11d'));_0x10803e['rejected']=this[_0x544f('0x2e')][_0x544f('0x119')];_0x10803e[_0x544f('0xbc')]=this[_0x544f('0x2e')][_0x544f('0xbc')];return _0x3f84ff(_0x10803e);}}else if(this[_0x544f('0x2e')][_0x544f('0xba')][_0x544f('0xd')]){_0x55aba5=this['_envelope']['rcptQueue'][_0x544f('0xad')]();this[_0x544f('0x30')][_0x544f('0xf')](_0x55aba5);this[_0x544f('0x53')][_0x544f('0xf')](_0x43e8af=>{this[_0x544f('0x117')](_0x43e8af,_0x3f84ff);});this[_0x544f('0x51')](_0x544f('0x116')+_0x55aba5+'>'+this['_getDsnRcptToArgs']());}}[_0x544f('0x11a')](_0x52695c,_0x372b81){if(!/^[23]/['test'](_0x52695c)){return _0x372b81(this[_0x544f('0x37')]('Data\x20command\x20failed',_0x544f('0xb8'),_0x52695c,_0x544f('0x11b')));}let _0x31dd05={'accepted':this[_0x544f('0x2e')]['accepted'],'rejected':this[_0x544f('0x2e')][_0x544f('0x119')]};if(this[_0x544f('0x2e')][_0x544f('0xbc')]['length']){_0x31dd05[_0x544f('0xbc')]=this['_envelope'][_0x544f('0xbc')];}_0x372b81(null,_0x31dd05);}['_actionSMTPStream'](_0x2583ec,_0x24b25f){if(Number(_0x2583ec[_0x544f('0x4e')](0x0))!==0x2){return _0x24b25f(this['_formatError'](_0x544f('0x11e'),_0x544f('0x79'),_0x2583ec,_0x544f('0x11b')));}else{return _0x24b25f(null,_0x2583ec);}}[_0x544f('0xe2')](_0x3e9a3e,_0xd9766e,_0xa04dd5,_0x2a318a){let _0x38f359;if(Number(_0xa04dd5[_0x544f('0x4e')](0x0))!==0x2){_0x38f359=this[_0x544f('0x37')](_0x544f('0x11f')+_0x3e9a3e,'EMESSAGE',_0xa04dd5,'DATA');_0x38f359['recipient']=_0x3e9a3e;this[_0x544f('0x2e')][_0x544f('0x119')][_0x544f('0xf')](_0x3e9a3e);this[_0x544f('0x2e')][_0x544f('0xbc')][_0x544f('0xf')](_0x38f359);for(let _0x747fff=0x0,_0x56f1c2=this[_0x544f('0x2e')][_0x544f('0xbd')]['length'];_0x747fff<_0x56f1c2;_0x747fff++){if(this[_0x544f('0x2e')][_0x544f('0xbd')][_0x747fff]===_0x3e9a3e){this[_0x544f('0x2e')][_0x544f('0xbd')][_0x544f('0x120')](_0x747fff,0x1);}}}if(_0xd9766e){return _0x2a318a(null,_0xa04dd5);}}['_handleXOauth2Token'](_0x351254,_0xc91372){this[_0x544f('0x58')]['oauth2'][_0x544f('0x121')](_0x351254,(_0x4c636b,_0x1d4840)=>{if(_0x4c636b){this['logger']['info']({'tnx':'smtp','username':this['_auth'][_0x544f('0x5f')],'action':_0x544f('0x10f'),'method':this[_0x544f('0x59')]},_0x544f('0x110'),JSON[_0x544f('0x67')](this['_auth'][_0x544f('0x5f')]));return _0xc91372(this[_0x544f('0x37')](_0x4c636b,_0x544f('0x62'),![],_0x544f('0x122')));}this[_0x544f('0x53')]['push'](_0x33a820=>{this[_0x544f('0x75')](_0x33a820,_0x351254,_0xc91372);});this['_sendCommand'](_0x544f('0x123')+this['_auth'][_0x544f('0x5b')][_0x544f('0x124')](_0x1d4840));});}['_isDestroyedMessage'](_0x2b3599){if(this['_destroyed']){return _0x544f('0x125')+_0x2b3599+_0x544f('0x126');}if(this[_0x544f('0x3e')]){if(this[_0x544f('0x3e')]['destroyed']){return _0x544f('0x125')+_0x2b3599+_0x544f('0x127');}if(!this[_0x544f('0x3e')][_0x544f('0x128')]){return'Cannot\x20'+_0x2b3599+_0x544f('0x129');}}}['_getHostname'](){let _0x454091=os['hostname']()||'';if(_0x454091[_0x544f('0x12a')]('.')<0x0){_0x454091='[127.0.0.1]';}if(_0x454091[_0x544f('0x6a')](/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)){_0x454091='['+_0x454091+']';}return _0x454091;}}module['exports']=SMTPConnection;