var _0x4dca=['createServer','options','_server','upgrade','close','apply','type\x20must\x20be\x20`web`\x20or\x20`ws`','No\x20such\x20pass','splice','name','_extend','url','parse','https','./eventemitter3','./ws-incoming','Server','wsPasses','webPasses','slice','call','length','function','target','forEach','forward','prependPath','web','proxyRequest','map','keys','util','inherits','prototype','onError','listen','ssl'];(function(_0x1b8cfb,_0x4ab9fb){var _0x472726=function(_0x4a161c){while(--_0x4a161c){_0x1b8cfb['push'](_0x1b8cfb['shift']());}};var _0x182371=function(){var _0x54feff={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3af30e,_0xef3018,_0xa096bf,_0x218749){_0x218749=_0x218749||{};var _0x558fd3=_0xef3018+'='+_0xa096bf;var _0x372aa6=0x0;for(var _0x372aa6=0x0,_0x881adf=_0x3af30e['length'];_0x372aa6<_0x881adf;_0x372aa6++){var _0x5b233a=_0x3af30e[_0x372aa6];_0x558fd3+=';\x20'+_0x5b233a;var _0xdc83a7=_0x3af30e[_0x5b233a];_0x3af30e['push'](_0xdc83a7);_0x881adf=_0x3af30e['length'];if(_0xdc83a7!==!![]){_0x558fd3+='='+_0xdc83a7;}}_0x218749['cookie']=_0x558fd3;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2c0e8e,_0x17172c){_0x2c0e8e=_0x2c0e8e||function(_0x10846d){return _0x10846d;};var _0x48c9b3=_0x2c0e8e(new RegExp('(?:^|;\x20)'+_0x17172c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x49d065=function(_0x15518d,_0x217908){_0x15518d(++_0x217908);};_0x49d065(_0x472726,_0x4ab9fb);return _0x48c9b3?decodeURIComponent(_0x48c9b3[0x1]):undefined;}};var _0x41197d=function(){var _0x54dcfd=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x54dcfd['test'](_0x54feff['removeCookie']['toString']());};_0x54feff['updateCookie']=_0x41197d;var _0x32af38='';var _0x22a3b9=_0x54feff['updateCookie']();if(!_0x22a3b9){_0x54feff['setCookie'](['*'],'counter',0x1);}else if(_0x22a3b9){_0x32af38=_0x54feff['getCookie'](null,'counter');}else{_0x54feff['removeCookie']();}};_0x182371();}(_0x4dca,0x1c6));var _0x245f=function(_0x3e5114,_0x56b68e){_0x3e5114=_0x3e5114-0x0;var _0x33e176=_0x4dca[_0x3e5114];return _0x33e176;};var _0x2513c7=function(){var _0x2d8f05=!![];return function(_0x4b81bb,_0x4d74cb){var _0x32719f=_0x2d8f05?function(){if(_0x4d74cb){var _0x2dc776=_0x4d74cb['apply'](_0x4b81bb,arguments);_0x4d74cb=null;return _0x2dc776;}}:function(){};_0x2d8f05=![];return _0x32719f;};}();var _0x499754=_0x2513c7(this,function(){var _0x15337b=function(){return'\x64\x65\x76';},_0x5077f2=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x250e21=function(){var _0x1368a2=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x1368a2['\x74\x65\x73\x74'](_0x15337b['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x56d143=function(){var _0x53e02b=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x53e02b['\x74\x65\x73\x74'](_0x5077f2['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x5942a6=function(_0x460a10){var _0x31b540=~-0x1>>0x1+0xff%0x0;if(_0x460a10['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x31b540)){_0x390305(_0x460a10);}};var _0x390305=function(_0x520b5a){var _0x1a49f2=~-0x4>>0x1+0xff%0x0;if(_0x520b5a['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x1a49f2){_0x5942a6(_0x520b5a);}};if(!_0x250e21()){if(!_0x56d143()){_0x5942a6('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x5942a6('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x5942a6('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x499754();var httpProxy=module['exports'],extend=require('util')[_0x245f('0x0')],parse_url=require(_0x245f('0x1'))[_0x245f('0x2')],http=require('http'),https=require(_0x245f('0x3')),EE3=require(_0x245f('0x4')),web=require('./web-incoming'),ws=require(_0x245f('0x5'));httpProxy[_0x245f('0x6')]=ProxyServer;function createRightProxy(_0x23cbd8){return function(_0x3025e5){return function(_0x15aadc,_0xae17af){var _0x1d119a=_0x23cbd8==='ws'?this[_0x245f('0x7')]:this[_0x245f('0x8')],_0x544fdf=[][_0x245f('0x9')][_0x245f('0xa')](arguments),_0x3641af=_0x544fdf[_0x245f('0xb')]-0x1,_0x47063f,_0x10b33c;if(typeof _0x544fdf[_0x3641af]===_0x245f('0xc')){_0x10b33c=_0x544fdf[_0x3641af];_0x3641af--;}var _0x4af530=_0x3025e5;if(!(_0x544fdf[_0x3641af]instanceof Buffer)&&_0x544fdf[_0x3641af]!==_0xae17af){_0x4af530=extend({},_0x3025e5);extend(_0x4af530,_0x544fdf[_0x3641af]);_0x3641af--;}if(_0x544fdf[_0x3641af]instanceof Buffer){_0x47063f=_0x544fdf[_0x3641af];}[_0x245f('0xd'),'forward'][_0x245f('0xe')](function(_0x5b64f8){if(typeof _0x4af530[_0x5b64f8]==='string')_0x4af530[_0x5b64f8]=parse_url(_0x4af530[_0x5b64f8]);});if(!_0x4af530[_0x245f('0xd')]&&!_0x4af530[_0x245f('0xf')]){return this['emit']('error',new Error('Must\x20provide\x20a\x20proper\x20URL\x20as\x20target'));}for(var _0x1eacfa=0x0;_0x1eacfa<_0x1d119a[_0x245f('0xb')];_0x1eacfa++){if(_0x1d119a[_0x1eacfa](_0x15aadc,_0xae17af,_0x4af530,_0x47063f,this,_0x10b33c)){break;}}};};}httpProxy['createRightProxy']=createRightProxy;function ProxyServer(_0xae2dab){EE3[_0x245f('0xa')](this);_0xae2dab=_0xae2dab||{};_0xae2dab[_0x245f('0x10')]=_0xae2dab[_0x245f('0x10')]===![]?![]:!![];this[_0x245f('0x11')]=this[_0x245f('0x12')]=createRightProxy(_0x245f('0x11'))(_0xae2dab);this['ws']=this['proxyWebsocketRequest']=createRightProxy('ws')(_0xae2dab);this['options']=_0xae2dab;this[_0x245f('0x8')]=Object['keys'](web)[_0x245f('0x13')](function(_0x4584e1){return web[_0x4584e1];});this[_0x245f('0x7')]=Object[_0x245f('0x14')](ws)[_0x245f('0x13')](function(_0x5ee00b){return ws[_0x5ee00b];});this['on']('error',this['onError'],this);}require(_0x245f('0x15'))[_0x245f('0x16')](ProxyServer,EE3);ProxyServer[_0x245f('0x17')][_0x245f('0x18')]=function(_0x4fe771){if(this['listeners']('error')['length']===0x1){throw _0x4fe771;}};ProxyServer[_0x245f('0x17')][_0x245f('0x19')]=function(_0x501137,_0x813397){var _0x5906e6=this,_0x4bd611=function(_0x543e5d,_0x50261c){_0x5906e6[_0x245f('0x11')](_0x543e5d,_0x50261c);};this['_server']=this['options']['ssl']?https['createServer'](this['options'][_0x245f('0x1a')],_0x4bd611):http[_0x245f('0x1b')](_0x4bd611);if(this[_0x245f('0x1c')]['ws']){this[_0x245f('0x1d')]['on'](_0x245f('0x1e'),function(_0x110128,_0x4f43e2,_0x459fd9){_0x5906e6['ws'](_0x110128,_0x4f43e2,_0x459fd9);});}this['_server']['listen'](_0x501137,_0x813397);return this;};ProxyServer[_0x245f('0x17')][_0x245f('0x1f')]=function(_0x2e3cfb){var _0x3cb28c=this;if(this['_server']){this['_server']['close'](_0x3f7b07);}function _0x3f7b07(){_0x3cb28c[_0x245f('0x1d')]=null;if(_0x2e3cfb){_0x2e3cfb[_0x245f('0x20')](null,arguments);}};};ProxyServer[_0x245f('0x17')]['before']=function(_0x5e2aca,_0x4fce9c,_0x4adbab){if(_0x5e2aca!=='ws'&&_0x5e2aca!=='web'){throw new Error(_0x245f('0x21'));}var _0x29ba43=_0x5e2aca==='ws'?this['wsPasses']:this[_0x245f('0x8')],_0x25eae4=![];_0x29ba43[_0x245f('0xe')](function(_0x209591,_0x2a7d4f){if(_0x209591['name']===_0x4fce9c)_0x25eae4=_0x2a7d4f;});if(_0x25eae4===![])throw new Error(_0x245f('0x22'));_0x29ba43[_0x245f('0x23')](_0x25eae4,0x0,_0x4adbab);};ProxyServer['prototype']['after']=function(_0x539766,_0x1032b2,_0x267abd){if(_0x539766!=='ws'&&_0x539766!==_0x245f('0x11')){throw new Error(_0x245f('0x21'));}var _0x1de04b=_0x539766==='ws'?this[_0x245f('0x7')]:this[_0x245f('0x8')],_0xceebc3=![];_0x1de04b[_0x245f('0xe')](function(_0x2b862d,_0x2f4b6b){if(_0x2b862d[_0x245f('0x24')]===_0x1032b2)_0xceebc3=_0x2f4b6b;});if(_0xceebc3===![])throw new Error('No\x20such\x20pass');_0x1de04b[_0x245f('0x23')](_0xceebc3++,0x0,_0x267abd);};